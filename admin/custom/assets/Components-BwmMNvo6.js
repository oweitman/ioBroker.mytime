import{j as d,g as Lr,a as Rr,s as Ve,c as pt,b as _r,S as wt}from"./createSvgIcon-ZZzs5MOD.js";import{C as B}from"./ConfigCustomMytimeSet__loadShare__react__loadShare__-DETRNCgy.js";import{P as b}from"./useTheme-CC4YsthV.js";import{v as hn,a as mn,s as Dt,u as yn,b as pn,c as bn,d as gn,P as vn,e as xn,f as Tn,D as wn,T as Dn,g as kt,i as Yt,h as Yr,j as Mt,k as kn,l as $e,M as dt,m as Ot,n as Mn,p as Sn,o as En,q as jn,r as Cn,t as On,w as ar,x as In,y as Nn,z as Ln,A as ct,B as Rn,C as _n,E as or,F as Je,G as Ar,H as Pr,I as Yn,J as An,K as Ur,V as Pn,L as lr,N as Un,O as $n,Q as ft,R as $r,S as It,U as Fn,W as Hn,X as L,Y as zn}from"./ConfigCustomMytimeSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-CXqkqK9i.js";import{C as Wn,a as Bn}from"./ConfigCustomMytimeSet__mf_v__runtimeInit__mf_v__-BoSExaeW.js";import{C as y,a as Ie}from"./ConfigCustomMytimeSet__loadShare___mf_0_mui_mf_1_icons_mf_2_material__loadShare__-DzhoyplN.js";import{u as ot,_ as St,T as Vn,a as Gn,r as At,b as Fr}from"./Dialog-DiI-q2VQ.js";import{g as Ge}from"./_commonjsHelpers-CE1G-McA.js";import{_ as ee}from"./extends-CF3RwP-h.js";import{T as ur,a as qn,t as Kn,D as Hr}from"./Tabs-D5WUiOnb.js";import"./emotion-serialize.esm-Q4o_CgeF.js";import"./ConfigCustomMytimeSet__loadShare___mf_0_emotion_mf_1_react__loadShare__-BkJRGS1m.js";import"./defaultTheme-D2ujPRmw.js";const Et=({adapter:n,value:e,timezone:r,props:t})=>{const a=hn({adapter:n,value:e,timezone:r,props:t});return a!==null?a:mn({adapter:n,value:e,timezone:r,props:t})};Et.valueManager=Dt;const Zn=n=>{const e=yn(n),{forwardedProps:r,internalProps:t}=pn(e,"date-time");return bn({forwardedProps:r,internalProps:t,valueManager:Dt,fieldValueManager:gn,validator:Et,valueType:"date-time"})},Jn=["slots","slotProps","InputProps","inputProps"],zr=B.forwardRef(function(e,r){const t=ot({props:e,name:"MuiDateTimeField"}),{slots:a,slotProps:l,InputProps:o,inputProps:i}=t,s=St(t,Jn),u=t,f=(a==null?void 0:a.textField)??(e.enableAccessibleFieldDOMStructure?vn:Vn),h=Gn({elementType:f,externalSlotProps:l==null?void 0:l.textField,externalForwardedProps:s,ownerState:u,additionalProps:{ref:r}});h.inputProps=ee({},i,h.inputProps),h.InputProps=ee({},o,h.InputProps);const c=Zn(h),p=xn(c),v=Tn(ee({},p,{slots:a,slotProps:l}));return d.jsx(f,ee({},v))});function Qn(n){return Lr("MuiDateTimePickerTabs",n)}Rr("MuiDateTimePickerTabs",["root"]);const Xn=n=>Yt(n)?"date":"time",ei=n=>n==="date"?"day":"hours",ti=n=>{const{classes:e}=n;return _r({root:["root"]},Qn,e)},ri=Ve(qn,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>({boxShadow:`0 -1px 0 0 inset ${(n.vars||n).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(n.vars||n).palette.divider}`,[`& .${Kn.indicator}`]:{bottom:"auto",top:0}}})),ni=function(e){const r=ot({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:t=d.jsx(wn,{}),onViewChange:a,timeIcon:l=d.jsx(Dn,{}),view:o,hidden:i=typeof window>"u"||window.innerHeight<667,className:s,sx:u}=r,f=kt(),h=ti(r),c=(p,v)=>{a(ei(v))};return i?null:d.jsxs(ri,{ownerState:r,variant:"fullWidth",value:Xn(o),onChange:c,className:pt(s,h.root),sx:u,children:[d.jsx(ur,{value:"date","aria-label":f.dateTableLabel,icon:d.jsx(B.Fragment,{children:t})}),d.jsx(ur,{value:"time","aria-label":f.timeTableLabel,icon:d.jsx(B.Fragment,{children:l})})]})};function ii(n){return Lr("MuiDateTimePickerToolbar",n)}const Nt=Rr("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),si=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant","toolbarTitle","className"],ai=n=>{const{classes:e,isLandscape:r,isRtl:t}=n;return _r({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",t&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",t&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",r&&"ampmLandscape"],ampmLabel:["ampmLabel"]},ii,e)},oi=Ve(Mn,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,[`& .${Sn.content} .${En.selected}`]:{color:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",isLandscape:!0},style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:{toolbarVariant:"desktop",isLandscape:!1},style:{paddingLeft:24,paddingRight:0}}]})),li=Ve("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(n,e)=>e.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),ui=Ve("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(n,e)=>e.timeContainer})({display:"flex",flexDirection:"row",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",isLandscape:!1},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({isLandscape:n,toolbarVariant:e})=>n&&e!=="desktop",style:{flexDirection:"column"}},{props:({isLandscape:n,toolbarVariant:e,isRtl:r})=>n&&e!=="desktop"&&r,style:{flexDirection:"column-reverse"}}]}),di=Ve("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(n,e)=>e.timeDigitsContainer})({display:"flex",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),dr=Ve(jn,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(n,e)=>e.separator})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),ci=Ve("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(n,e)=>[{[`.${Nt.ampmLabel}`]:e.ampmLabel},{[`&.${Nt.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${Nt.ampmLabel}`]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]});function fi(n){const e=ot({props:n,name:"MuiDateTimePickerToolbar"}),{ampm:r,ampmInClock:t,value:a,onChange:l,view:o,isLandscape:i,onViewChange:s,toolbarFormat:u,toolbarPlaceholder:f="––",views:h,disabled:c,readOnly:p,toolbarVariant:v="mobile",toolbarTitle:x,className:T}=e,D=St(e,si),m=Yr(),k=ee({},e,{isRtl:m}),g=Mt(),{meridiemMode:M,handleMeridiemChange:$}=kn(a,r,l),Z=!!(r&&!t),Q=v==="desktop",pe=kt(),q=ai(k),R=x??pe.dateTimePickerToolbarTitle,X=Y=>r?g.format(Y,"hours12h"):g.format(Y,"hours24h"),fe=B.useMemo(()=>a?u?g.formatByString(a,u):g.format(a,"shortDate"):f,[a,u,f,g]);return d.jsxs(oi,ee({isLandscape:i,className:pt(q.root,T),toolbarTitle:R},D,{ownerState:k,children:[d.jsxs(li,{className:q.dateContainer,ownerState:k,children:[h.includes("year")&&d.jsx($e,{tabIndex:-1,variant:"subtitle1",onClick:()=>s("year"),selected:o==="year",value:a?g.format(a,"year"):"–"}),h.includes("day")&&d.jsx($e,{tabIndex:-1,variant:Q?"h5":"h4",onClick:()=>s("day"),selected:o==="day",value:fe})]}),d.jsxs(ui,{className:q.timeContainer,ownerState:k,children:[d.jsxs(di,{className:q.timeDigitsContainer,ownerState:k,children:[h.includes("hours")&&d.jsxs(B.Fragment,{children:[d.jsx($e,{variant:Q?"h5":"h3",width:Q&&!i?dt:void 0,onClick:()=>s("hours"),selected:o==="hours",value:a?X(a):"--"}),d.jsx(dr,{variant:Q?"h5":"h3",value:":",className:q.separator,ownerState:k}),d.jsx($e,{variant:Q?"h5":"h3",width:Q&&!i?dt:void 0,onClick:()=>s("minutes"),selected:o==="minutes"||!h.includes("minutes")&&o==="hours",value:a?g.format(a,"minutes"):"--",disabled:!h.includes("minutes")})]}),h.includes("seconds")&&d.jsxs(B.Fragment,{children:[d.jsx(dr,{variant:Q?"h5":"h3",value:":",className:q.separator,ownerState:k}),d.jsx($e,{variant:Q?"h5":"h3",width:Q&&!i?dt:void 0,onClick:()=>s("seconds"),selected:o==="seconds",value:a?g.format(a,"seconds"):"--"})]})]}),Z&&!Q&&d.jsxs(ci,{className:q.ampmSelection,ownerState:k,children:[d.jsx($e,{variant:"subtitle2",selected:M==="am",typographyClassName:q.ampmLabel,value:Ot(g,"am"),onClick:p?void 0:()=>$("am"),disabled:c}),d.jsx($e,{variant:"subtitle2",selected:M==="pm",typographyClassName:q.ampmLabel,value:Ot(g,"pm"),onClick:p?void 0:()=>$("pm"),disabled:c})]}),r&&Q&&d.jsx($e,{variant:"h5",onClick:()=>s("meridiem"),selected:o==="meridiem",value:a&&M?Ot(g,M):"--",width:dt})]})]}))}function Wr(n,e){var i;const r=Mt(),t=Cn(),a=ot({props:n,name:e}),l=a.ampm??r.is12HourCycleInCurrentLocale(),o=B.useMemo(()=>{var s;return((s=a.localeText)==null?void 0:s.toolbarTitle)==null?a.localeText:ee({},a.localeText,{dateTimePickerToolbarTitle:a.localeText.toolbarTitle})},[a.localeText]);return ee({},a,On({views:a.views,openTo:a.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:l,localeText:o,orientation:a.orientation??"portrait",disableIgnoringDatePartForTimeValidation:a.disableIgnoringDatePartForTimeValidation??!!(a.minDateTime||a.maxDateTime||a.disablePast||a.disableFuture),disableFuture:a.disableFuture??!1,disablePast:a.disablePast??!1,minDate:ar(r,a.minDateTime??a.minDate,t.minDate),maxDate:ar(r,a.maxDateTime??a.maxDate,t.maxDate),minTime:a.minDateTime??a.minTime,maxTime:a.maxDateTime??a.maxTime,slots:ee({toolbar:fi,tabs:ni},a.slots),slotProps:ee({},a.slotProps,{toolbar:ee({ampm:l},(i=a.slotProps)==null?void 0:i.toolbar)})})}const hi=B.forwardRef(function(e,r){var x;const t=Yr(),{toolbar:a,tabs:l,content:o,actionBar:i,shortcuts:s}=In(e),{sx:u,className:f,isLandscape:h,classes:c}=e,p=i&&(((x=i.props.actions)==null?void 0:x.length)??0)>0,v=ee({},e,{isRtl:t});return d.jsxs(Nn,{ref:r,className:pt(ct.root,c==null?void 0:c.root,f),sx:[{[`& .${ct.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${ct.actionBar}`]:{gridRow:5}},...Array.isArray(u)?u:[u]],ownerState:v,children:[h?s:a,h?a:s,d.jsxs(Ln,{className:pt(ct.contentWrapper,c==null?void 0:c.contentWrapper),sx:{display:"grid"},children:[o,l,p&&d.jsx(Hr,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),i]})}),mi=["openTo","focusedView","timeViewsCount"],yi=function(e,r,t){var f,h;const{openTo:a,focusedView:l,timeViewsCount:o}=t,i=St(t,mi),s=ee({},i,{autoFocus:!1,focusedView:null,sx:[{[`&.${lr.root}`]:{borderBottom:0},[`&.${lr.root}, .${Un.root}, &.${$n.root}`]:{maxHeight:Pn}}]}),u=ft(r);return d.jsxs(B.Fragment,{children:[(f=e[u?"day":r])==null?void 0:f.call(e,ee({},t,{view:u?"day":r,focusedView:l&&Yt(l)?l:null,views:t.views.filter(Yt),sx:[{gridColumn:1},...s.sx]})),o>0&&d.jsxs(B.Fragment,{children:[d.jsx(Hr,{orientation:"vertical",sx:{gridColumn:2}}),(h=e[u?r:"hours"])==null?void 0:h.call(e,ee({},s,{view:u?r:"hours",focusedView:l&&ft(l)?l:null,openTo:ft(a)?a:"hours",views:t.views.filter(ft),sx:[{gridColumn:3},...s.sx]}))]})]})},Br=B.forwardRef(function(e,r){var m,k,g,M;const t=kt(),a=Mt(),l=Wr(e,"MuiDesktopDateTimePicker"),{shouldRenderTimeInASingleColumn:o,thresholdToRenderTimeInASingleColumn:i,views:s,timeSteps:u}=Rn(l),f=o?_n:or,h=ee({day:Je,month:Je,year:Je,hours:f,minutes:f,seconds:f,meridiem:f},l.viewRenderers),c=l.ampmInClock??!0,v=((m=h.hours)==null?void 0:m.name)===or.name?s:s.filter($=>$!=="meridiem"),x=o?[]:["accept"],T=ee({},l,{viewRenderers:h,format:Ar(a,l),views:v,yearsPerRow:l.yearsPerRow??4,ampmInClock:c,timeSteps:u,thresholdToRenderTimeInASingleColumn:i,shouldRenderTimeInASingleColumn:o,slots:ee({field:zr,layout:hi,openPickerIcon:Yn},l.slots),slotProps:ee({},l.slotProps,{field:$=>{var Z;return ee({},At((Z=l.slotProps)==null?void 0:Z.field,$),Pr(l),{ref:r})},toolbar:ee({hidden:!0,ampmInClock:c,toolbarVariant:"desktop"},(k=l.slotProps)==null?void 0:k.toolbar),tabs:ee({hidden:!0},(g=l.slotProps)==null?void 0:g.tabs),actionBar:$=>{var Z;return ee({actions:x},At((Z=l.slotProps)==null?void 0:Z.actionBar,$))}})}),{renderPicker:D}=An({props:T,valueManager:Dt,valueType:"date-time",getOpenDialogAriaText:Ur({utils:a,formatKey:"fullDate",contextTranslation:t.openDatePickerDialogue,propsTranslation:(M=T.localeText)==null?void 0:M.openDatePickerDialogue}),validator:Et,rendererInterceptor:yi});return D()});Br.propTypes={ampm:b.bool,ampmInClock:b.bool,autoFocus:b.bool,className:b.string,closeOnSelect:b.bool,dayOfWeekFormatter:b.func,defaultValue:b.object,disabled:b.bool,disableFuture:b.bool,disableHighlightToday:b.bool,disableIgnoringDatePartForTimeValidation:b.bool,disableOpenPicker:b.bool,disablePast:b.bool,displayWeekNumber:b.bool,enableAccessibleFieldDOMStructure:b.any,fixedWeekNumber:b.number,format:b.string,formatDensity:b.oneOf(["dense","spacious"]),inputRef:$r,label:b.node,loading:b.bool,localeText:b.object,maxDate:b.object,maxDateTime:b.object,maxTime:b.object,minDate:b.object,minDateTime:b.object,minTime:b.object,minutesStep:b.number,monthsPerRow:b.oneOf([3,4]),name:b.string,onAccept:b.func,onChange:b.func,onClose:b.func,onError:b.func,onMonthChange:b.func,onOpen:b.func,onSelectedSectionsChange:b.func,onViewChange:b.func,onYearChange:b.func,open:b.bool,openTo:b.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:b.oneOf(["landscape","portrait"]),readOnly:b.bool,reduceAnimations:b.bool,referenceDate:b.object,renderLoading:b.func,selectedSections:b.oneOfType([b.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),b.number]),shouldDisableDate:b.func,shouldDisableMonth:b.func,shouldDisableTime:b.func,shouldDisableYear:b.func,showDaysOutsideCurrentMonth:b.bool,skipDisabled:b.bool,slotProps:b.object,slots:b.object,sx:b.oneOfType([b.arrayOf(b.oneOfType([b.func,b.object,b.bool])),b.func,b.object]),thresholdToRenderTimeInASingleColumn:b.number,timeSteps:b.shape({hours:b.number,minutes:b.number,seconds:b.number}),timezone:b.string,value:b.object,view:b.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:b.shape({day:b.func,hours:b.func,meridiem:b.func,minutes:b.func,month:b.func,seconds:b.func,year:b.func}),views:b.arrayOf(b.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:b.oneOf(["asc","desc"]),yearsPerRow:b.oneOf([3,4])};const Vr=B.forwardRef(function(e,r){var f,h,c;const t=kt(),a=Mt(),l=Wr(e,"MuiMobileDateTimePicker"),o=ee({day:Je,month:Je,year:Je,hours:It,minutes:It,seconds:It},l.viewRenderers),i=l.ampmInClock??!1,s=ee({},l,{viewRenderers:o,format:Ar(a,l),ampmInClock:i,slots:ee({field:zr},l.slots),slotProps:ee({},l.slotProps,{field:p=>{var v;return ee({},At((v=l.slotProps)==null?void 0:v.field,p),Pr(l),{ref:r})},toolbar:ee({hidden:!1,ampmInClock:i},(f=l.slotProps)==null?void 0:f.toolbar),tabs:ee({hidden:!1},(h=l.slotProps)==null?void 0:h.tabs)})}),{renderPicker:u}=Fn({props:s,valueManager:Dt,valueType:"date-time",getOpenDialogAriaText:Ur({utils:a,formatKey:"fullDate",contextTranslation:t.openDatePickerDialogue,propsTranslation:(c=s.localeText)==null?void 0:c.openDatePickerDialogue}),validator:Et});return u()});Vr.propTypes={ampm:b.bool,ampmInClock:b.bool,autoFocus:b.bool,className:b.string,closeOnSelect:b.bool,dayOfWeekFormatter:b.func,defaultValue:b.object,disabled:b.bool,disableFuture:b.bool,disableHighlightToday:b.bool,disableIgnoringDatePartForTimeValidation:b.bool,disableOpenPicker:b.bool,disablePast:b.bool,displayWeekNumber:b.bool,enableAccessibleFieldDOMStructure:b.any,fixedWeekNumber:b.number,format:b.string,formatDensity:b.oneOf(["dense","spacious"]),inputRef:$r,label:b.node,loading:b.bool,localeText:b.object,maxDate:b.object,maxDateTime:b.object,maxTime:b.object,minDate:b.object,minDateTime:b.object,minTime:b.object,minutesStep:b.number,monthsPerRow:b.oneOf([3,4]),name:b.string,onAccept:b.func,onChange:b.func,onClose:b.func,onError:b.func,onMonthChange:b.func,onOpen:b.func,onSelectedSectionsChange:b.func,onViewChange:b.func,onYearChange:b.func,open:b.bool,openTo:b.oneOf(["day","hours","minutes","month","seconds","year"]),orientation:b.oneOf(["landscape","portrait"]),readOnly:b.bool,reduceAnimations:b.bool,referenceDate:b.object,renderLoading:b.func,selectedSections:b.oneOfType([b.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),b.number]),shouldDisableDate:b.func,shouldDisableMonth:b.func,shouldDisableTime:b.func,shouldDisableYear:b.func,showDaysOutsideCurrentMonth:b.bool,slotProps:b.object,slots:b.object,sx:b.oneOfType([b.arrayOf(b.oneOfType([b.func,b.object,b.bool])),b.func,b.object]),timezone:b.string,value:b.object,view:b.oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:b.shape({day:b.func,hours:b.func,minutes:b.func,month:b.func,seconds:b.func,year:b.func}),views:b.arrayOf(b.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:b.oneOf(["asc","desc"]),yearsPerRow:b.oneOf([3,4])};const pi=["desktopModeMediaQuery"],Pt=B.forwardRef(function(e,r){const t=ot({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:a=Hn}=t,l=St(t,pi);return Fr(a,{defaultMatches:!0})?d.jsx(Br,ee({ref:r},l)):d.jsx(Vr,ee({ref:r},l))});var Bt={exports:{}},bi=Bt.exports;(function(n,e){(function(r,t){n.exports=t()})(bi,(function(){var r=1e3,t=6e4,a=36e5,l="millisecond",o="second",i="minute",s="hour",u="day",f="week",h="month",c="quarter",p="year",v="date",x="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var O=["th","st","nd","rd"],E=Y%100;return"["+Y+(O[(E-20)%10]||O[E]||O[0])+"]"}},k=function(Y,O,E){var _=String(Y);return!_||_.length>=O?Y:""+Array(O+1-_.length).join(E)+Y},g={s:k,z:function(Y){var O=-Y.utcOffset(),E=Math.abs(O),_=Math.floor(E/60),I=E%60;return(O<=0?"+":"-")+k(_,2,"0")+":"+k(I,2,"0")},m:function Y(O,E){if(O.date()<E.date())return-Y(E,O);var _=12*(E.year()-O.year())+(E.month()-O.month()),I=O.clone().add(_,h),z=E-I<0,V=O.clone().add(_+(z?-1:1),h);return+(-(_+(E-I)/(z?I-V:V-I))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:h,y:p,w:f,d:u,D:v,h:s,m:i,s:o,ms:l,Q:c}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},M="en",$={};$[M]=m;var Z="$isDayjsObject",Q=function(Y){return Y instanceof X||!(!Y||!Y[Z])},pe=function Y(O,E,_){var I;if(!O)return M;if(typeof O=="string"){var z=O.toLowerCase();$[z]&&(I=z),E&&($[z]=E,I=z);var V=O.split("-");if(!I&&V.length>1)return Y(V[0])}else{var G=O.name;$[G]=O,I=G}return!_&&I&&(M=I),I||!_&&M},q=function(Y,O){if(Q(Y))return Y.clone();var E=typeof O=="object"?O:{};return E.date=Y,E.args=arguments,new X(E)},R=g;R.l=pe,R.i=Q,R.w=function(Y,O){return q(Y,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var X=(function(){function Y(E){this.$L=pe(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[Z]=!0}var O=Y.prototype;return O.parse=function(E){this.$d=(function(_){var I=_.date,z=_.utc;if(I===null)return new Date(NaN);if(R.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var V=I.match(T);if(V){var G=V[2]-1||0,ae=(V[7]||"0").substring(0,3);return z?new Date(Date.UTC(V[1],G,V[3]||1,V[4]||0,V[5]||0,V[6]||0,ae)):new Date(V[1],G,V[3]||1,V[4]||0,V[5]||0,V[6]||0,ae)}}return new Date(I)})(E),this.init()},O.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},O.$utils=function(){return R},O.isValid=function(){return this.$d.toString()!==x},O.isSame=function(E,_){var I=q(E);return this.startOf(_)<=I&&I<=this.endOf(_)},O.isAfter=function(E,_){return q(E)<this.startOf(_)},O.isBefore=function(E,_){return this.endOf(_)<q(E)},O.$g=function(E,_,I){return R.u(E)?this[_]:this.set(I,E)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(E,_){var I=this,z=!!R.u(_)||_,V=R.p(E),G=function(W,P){var F=R.w(I.$u?Date.UTC(I.$y,P,W):new Date(I.$y,P,W),I);return z?F:F.endOf(u)},ae=function(W,P){return R.w(I.toDate()[W].apply(I.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(P)),I)},se=this.$W,he=this.$M,w=this.$D,S="set"+(this.$u?"UTC":"");switch(V){case p:return z?G(1,0):G(31,11);case h:return z?G(1,he):G(0,he+1);case f:var j=this.$locale().weekStart||0,U=(se<j?se+7:se)-j;return G(z?w-U:w+(6-U),he);case u:case v:return ae(S+"Hours",0);case s:return ae(S+"Minutes",1);case i:return ae(S+"Seconds",2);case o:return ae(S+"Milliseconds",3);default:return this.clone()}},O.endOf=function(E){return this.startOf(E,!1)},O.$set=function(E,_){var I,z=R.p(E),V="set"+(this.$u?"UTC":""),G=(I={},I[u]=V+"Date",I[v]=V+"Date",I[h]=V+"Month",I[p]=V+"FullYear",I[s]=V+"Hours",I[i]=V+"Minutes",I[o]=V+"Seconds",I[l]=V+"Milliseconds",I)[z],ae=z===u?this.$D+(_-this.$W):_;if(z===h||z===p){var se=this.clone().set(v,1);se.$d[G](ae),se.init(),this.$d=se.set(v,Math.min(this.$D,se.daysInMonth())).$d}else G&&this.$d[G](ae);return this.init(),this},O.set=function(E,_){return this.clone().$set(E,_)},O.get=function(E){return this[R.p(E)]()},O.add=function(E,_){var I,z=this;E=Number(E);var V=R.p(_),G=function(he){var w=q(z);return R.w(w.date(w.date()+Math.round(he*E)),z)};if(V===h)return this.set(h,this.$M+E);if(V===p)return this.set(p,this.$y+E);if(V===u)return G(1);if(V===f)return G(7);var ae=(I={},I[i]=t,I[s]=a,I[o]=r,I)[V]||1,se=this.$d.getTime()+E*ae;return R.w(se,this)},O.subtract=function(E,_){return this.add(-1*E,_)},O.format=function(E){var _=this,I=this.$locale();if(!this.isValid())return I.invalidDate||x;var z=E||"YYYY-MM-DDTHH:mm:ssZ",V=R.z(this),G=this.$H,ae=this.$m,se=this.$M,he=I.weekdays,w=I.months,S=I.meridiem,j=function(P,F,H,A){return P&&(P[F]||P(_,z))||H[F].slice(0,A)},U=function(P){return R.s(G%12||12,P,"0")},W=S||function(P,F,H){var A=P<12?"AM":"PM";return H?A.toLowerCase():A};return z.replace(D,(function(P,F){return F||(function(H){switch(H){case"YY":return String(_.$y).slice(-2);case"YYYY":return R.s(_.$y,4,"0");case"M":return se+1;case"MM":return R.s(se+1,2,"0");case"MMM":return j(I.monthsShort,se,w,3);case"MMMM":return j(w,se);case"D":return _.$D;case"DD":return R.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return j(I.weekdaysMin,_.$W,he,2);case"ddd":return j(I.weekdaysShort,_.$W,he,3);case"dddd":return he[_.$W];case"H":return String(G);case"HH":return R.s(G,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return W(G,ae,!0);case"A":return W(G,ae,!1);case"m":return String(ae);case"mm":return R.s(ae,2,"0");case"s":return String(_.$s);case"ss":return R.s(_.$s,2,"0");case"SSS":return R.s(_.$ms,3,"0");case"Z":return V}return null})(P)||V.replace(":","")}))},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(E,_,I){var z,V=this,G=R.p(_),ae=q(E),se=(ae.utcOffset()-this.utcOffset())*t,he=this-ae,w=function(){return R.m(V,ae)};switch(G){case p:z=w()/12;break;case h:z=w();break;case c:z=w()/3;break;case f:z=(he-se)/6048e5;break;case u:z=(he-se)/864e5;break;case s:z=he/a;break;case i:z=he/t;break;case o:z=he/r;break;default:z=he}return I?z:R.a(z)},O.daysInMonth=function(){return this.endOf(h).$D},O.$locale=function(){return $[this.$L]},O.locale=function(E,_){if(!E)return this.$L;var I=this.clone(),z=pe(E,_,!0);return z&&(I.$L=z),I},O.clone=function(){return R.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},Y})(),fe=X.prototype;return q.prototype=fe,[["$ms",l],["$s",o],["$m",i],["$H",s],["$W",u],["$M",h],["$y",p],["$D",v]].forEach((function(Y){fe[Y[1]]=function(O){return this.$g(O,Y[0],Y[1])}})),q.extend=function(Y,O){return Y.$i||(Y(O,X,q),Y.$i=!0),q},q.locale=pe,q.isDayjs=Q,q.unix=function(Y){return q(1e3*Y)},q.en=$[M],q.Ls=$,q.p={},q}))})(Bt);var gi=Bt.exports;const ie=Ge(gi);var Vt={exports:{}},vi=Vt.exports;(function(n,e){(function(r,t){n.exports=t()})(vi,(function(){var r="week",t="year";return function(a,l,o){var i=l.prototype;i.week=function(s){if(s===void 0&&(s=null),s!==null)return this.add(7*(s-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var f=o(this).startOf(t).add(1,t).date(u),h=o(this).endOf(r);if(f.isBefore(h))return 1}var c=o(this).startOf(t).date(u).startOf(r).subtract(1,"millisecond"),p=this.diff(c,r,!0);return p<0?o(this).startOf("week").week():Math.ceil(p)},i.weeks=function(s){return s===void 0&&(s=null),this.week(s)}}}))})(Vt);var xi=Vt.exports;const Ti=Ge(xi);var Gt={exports:{}},wi=Gt.exports;(function(n,e){(function(r,t){n.exports=t()})(wi,(function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,l=/\d\d/,o=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,s={},u=function(T){return(T=+T)+(T>68?1900:2e3)},f=function(T){return function(D){this[T]=+D}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(T){(this.zone||(this.zone={})).offset=(function(D){if(!D||D==="Z")return 0;var m=D.match(/([+-]|\d\d)/g),k=60*m[1]+(+m[2]||0);return k===0?0:m[0]==="+"?-k:k})(T)}],c=function(T){var D=s[T];return D&&(D.indexOf?D:D.s.concat(D.f))},p=function(T,D){var m,k=s.meridiem;if(k){for(var g=1;g<=24;g+=1)if(T.indexOf(k(g,0,D))>-1){m=g>12;break}}else m=T===(D?"pm":"PM");return m},v={A:[i,function(T){this.afternoon=p(T,!1)}],a:[i,function(T){this.afternoon=p(T,!0)}],Q:[a,function(T){this.month=3*(T-1)+1}],S:[a,function(T){this.milliseconds=100*+T}],SS:[l,function(T){this.milliseconds=10*+T}],SSS:[/\d{3}/,function(T){this.milliseconds=+T}],s:[o,f("seconds")],ss:[o,f("seconds")],m:[o,f("minutes")],mm:[o,f("minutes")],H:[o,f("hours")],h:[o,f("hours")],HH:[o,f("hours")],hh:[o,f("hours")],D:[o,f("day")],DD:[l,f("day")],Do:[i,function(T){var D=s.ordinal,m=T.match(/\d+/);if(this.day=m[0],D)for(var k=1;k<=31;k+=1)D(k).replace(/\[|\]/g,"")===T&&(this.day=k)}],w:[o,f("week")],ww:[l,f("week")],M:[o,f("month")],MM:[l,f("month")],MMM:[i,function(T){var D=c("months"),m=(c("monthsShort")||D.map((function(k){return k.slice(0,3)}))).indexOf(T)+1;if(m<1)throw new Error;this.month=m%12||m}],MMMM:[i,function(T){var D=c("months").indexOf(T)+1;if(D<1)throw new Error;this.month=D%12||D}],Y:[/[+-]?\d+/,f("year")],YY:[l,function(T){this.year=u(T)}],YYYY:[/\d{4}/,f("year")],Z:h,ZZ:h};function x(T){var D,m;D=T,m=s&&s.formats;for(var k=(T=D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(q,R,X){var fe=X&&X.toUpperCase();return R||m[X]||r[X]||m[fe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(Y,O,E){return O||E.slice(1)}))}))).match(t),g=k.length,M=0;M<g;M+=1){var $=k[M],Z=v[$],Q=Z&&Z[0],pe=Z&&Z[1];k[M]=pe?{regex:Q,parser:pe}:$.replace(/^\[|\]$/g,"")}return function(q){for(var R={},X=0,fe=0;X<g;X+=1){var Y=k[X];if(typeof Y=="string")fe+=Y.length;else{var O=Y.regex,E=Y.parser,_=q.slice(fe),I=O.exec(_)[0];E.call(R,I),q=q.replace(I,"")}}return(function(z){var V=z.afternoon;if(V!==void 0){var G=z.hours;V?G<12&&(z.hours+=12):G===12&&(z.hours=0),delete z.afternoon}})(R),R}}return function(T,D,m){m.p.customParseFormat=!0,T&&T.parseTwoDigitYear&&(u=T.parseTwoDigitYear);var k=D.prototype,g=k.parse;k.parse=function(M){var $=M.date,Z=M.utc,Q=M.args;this.$u=Z;var pe=Q[1];if(typeof pe=="string"){var q=Q[2]===!0,R=Q[3]===!0,X=q||R,fe=Q[2];R&&(fe=Q[2]),s=this.$locale(),!q&&fe&&(s=m.Ls[fe]),this.$d=(function(_,I,z,V){try{if(["x","X"].indexOf(I)>-1)return new Date((I==="X"?1e3:1)*_);var G=x(I)(_),ae=G.year,se=G.month,he=G.day,w=G.hours,S=G.minutes,j=G.seconds,U=G.milliseconds,W=G.zone,P=G.week,F=new Date,H=he||(ae||se?1:F.getDate()),A=ae||F.getFullYear(),K=0;ae&&!se||(K=se>0?se-1:F.getMonth());var te,oe=w||0,J=S||0,ye=j||0,me=U||0;return W?new Date(Date.UTC(A,K,H,oe,J,ye,me+60*W.offset*1e3)):z?new Date(Date.UTC(A,K,H,oe,J,ye,me)):(te=new Date(A,K,H,oe,J,ye,me),P&&(te=V(te).week(P).toDate()),te)}catch{return new Date("")}})($,pe,Z,m),this.init(),fe&&fe!==!0&&(this.$L=this.locale(fe).$L),X&&$!=this.format(pe)&&(this.$d=new Date("")),s={}}else if(pe instanceof Array)for(var Y=pe.length,O=1;O<=Y;O+=1){Q[1]=pe[O-1];var E=m.apply(this,Q);if(E.isValid()){this.$d=E.$d,this.$L=E.$L,this.init();break}O===Y&&(this.$d=new Date(""))}else g.call(this,M)}}}))})(Gt);var Di=Gt.exports;const ki=Ge(Di);var qt={exports:{}},Mi=qt.exports;(function(n,e){(function(r,t){n.exports=t()})(Mi,(function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,a,l){var o=a.prototype,i=o.format;l.en.formats=r,o.format=function(s){s===void 0&&(s="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,f=(function(h,c){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(p,v,x){var T=x&&x.toUpperCase();return v||c[x]||r[x]||c[T].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(D,m,k){return m||k.slice(1)}))}))})(s,u===void 0?{}:u);return i.call(this,f)}}}))})(qt);var Si=qt.exports;const Ei=Ge(Si);var Kt={exports:{}},ji=Kt.exports;(function(n,e){(function(r,t){n.exports=t()})(ji,(function(){return function(r,t,a){t.prototype.isBetween=function(l,o,i,s){var u=a(l),f=a(o),h=(s=s||"()")[0]==="(",c=s[1]===")";return(h?this.isAfter(u,i):!this.isBefore(u,i))&&(c?this.isBefore(f,i):!this.isAfter(f,i))||(h?this.isBefore(u,i):!this.isAfter(u,i))&&(c?this.isAfter(f,i):!this.isBefore(f,i))}}}))})(Kt);var Ci=Kt.exports;const Oi=Ge(Ci);var Zt={exports:{}},Ii=Zt.exports;(function(n,e){(function(r,t){n.exports=t()})(Ii,(function(){return function(r,t){var a=t.prototype,l=a.format;a.format=function(o){var i=this,s=this.$locale();if(!this.isValid())return l.bind(this)(o);var u=this.$utils(),f=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(h){switch(h){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return s.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return s.ordinal(i.week(),"W");case"w":case"ww":return u.s(i.week(),h==="w"?1:2,"0");case"W":case"WW":return u.s(i.isoWeek(),h==="W"?1:2,"0");case"k":case"kk":return u.s(String(i.$H===0?24:i.$H),h==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return h}}));return l.bind(this)(f)}}}))})(Zt);var Ni=Zt.exports;const Li=Ge(Ni);ie.extend(Ei);ie.extend(Ti);ie.extend(Oi);ie.extend(Li);const Ri={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},_i={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},Lt=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),cr=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),Yi=(n,e)=>e?(...r)=>n(...r).locale(e):n;class Ai{constructor({locale:e,formats:r}={}){this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=Ri,this.setLocaleToValue=t=>{const a=this.getCurrentLocaleCode();return a===t.locale()?t:t.locale(a)},this.hasUTCPlugin=()=>typeof ie.utc<"u",this.hasTimezonePlugin=()=>typeof ie.tz<"u",this.isSame=(t,a,l)=>{const o=this.setTimezone(a,this.getTimezone(t));return t.format(l)===o.format(l)},this.cleanTimezone=t=>{switch(t){case"default":return;case"system":return ie.tz.guess();default:return t}},this.createSystemDate=t=>{if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const a=ie.tz.guess();return a!=="UTC"?ie.tz(t,a):ie(t)}return ie(t)},this.createUTCDate=t=>{if(!this.hasUTCPlugin())throw new Error(Lt);return ie.utc(t)},this.createTZDate=(t,a)=>{if(!this.hasUTCPlugin())throw new Error(Lt);if(!this.hasTimezonePlugin())throw new Error(cr);const l=t!==void 0&&!t.endsWith("Z");return ie(t).tz(this.cleanTimezone(a),l)},this.getLocaleFormats=()=>{const t=ie.Ls,a=this.locale||"en";let l=t[a];return l===void 0&&(l=t.en),l.formats},this.adjustOffset=t=>{if(!this.hasTimezonePlugin())return t;const a=this.getTimezone(t);if(a!=="UTC"){const l=t.tz(this.cleanTimezone(a),!0);if(l.$offset===(t.$offset??0))return t;t.$offset=l.$offset}return t},this.date=(t,a="default")=>{if(t===null)return null;let l;return a==="UTC"?l=this.createUTCDate(t):a==="system"||a==="default"&&!this.hasTimezonePlugin()?l=this.createSystemDate(t):l=this.createTZDate(t,a),this.locale===void 0?l:l.locale(this.locale)},this.getInvalidDate=()=>ie(new Date("Invalid date")),this.getTimezone=t=>{var a;if(this.hasTimezonePlugin()){const l=(a=t.$x)==null?void 0:a.$timezone;if(l)return l}return this.hasUTCPlugin()&&t.isUTC()?"UTC":"system"},this.setTimezone=(t,a)=>{if(this.getTimezone(t)===a)return t;if(a==="UTC"){if(!this.hasUTCPlugin())throw new Error(Lt);return t.utc()}if(a==="system")return t.local();if(!this.hasTimezonePlugin()){if(a==="default")return t;throw new Error(cr)}return ie.tz(t,this.cleanTimezone(a))},this.toJsDate=t=>t.toDate(),this.parse=(t,a)=>t===""?null:this.dayjs(t,a,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=t=>{const a=this.getLocaleFormats(),l=o=>o.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(i,s,u)=>s||u.slice(1));return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(o,i,s)=>{const u=s&&s.toUpperCase();return i||a[s]||l(a[u])})},this.isValid=t=>t==null?!1:t.isValid(),this.format=(t,a)=>this.formatByString(t,this.formats[a]),this.formatByString=(t,a)=>this.dayjs(t).format(a),this.formatNumber=t=>t,this.isEqual=(t,a)=>t===null&&a===null?!0:t===null||a===null?!1:t.toDate().getTime()===a.toDate().getTime(),this.isSameYear=(t,a)=>this.isSame(t,a,"YYYY"),this.isSameMonth=(t,a)=>this.isSame(t,a,"YYYY-MM"),this.isSameDay=(t,a)=>this.isSame(t,a,"YYYY-MM-DD"),this.isSameHour=(t,a)=>t.isSame(a,"hour"),this.isAfter=(t,a)=>t>a,this.isAfterYear=(t,a)=>this.hasUTCPlugin()?!this.isSameYear(t,a)&&t.utc()>a.utc():t.isAfter(a,"year"),this.isAfterDay=(t,a)=>this.hasUTCPlugin()?!this.isSameDay(t,a)&&t.utc()>a.utc():t.isAfter(a,"day"),this.isBefore=(t,a)=>t<a,this.isBeforeYear=(t,a)=>this.hasUTCPlugin()?!this.isSameYear(t,a)&&t.utc()<a.utc():t.isBefore(a,"year"),this.isBeforeDay=(t,a)=>this.hasUTCPlugin()?!this.isSameDay(t,a)&&t.utc()<a.utc():t.isBefore(a,"day"),this.isWithinRange=(t,[a,l])=>t>=a&&t<=l,this.startOfYear=t=>this.adjustOffset(t.startOf("year")),this.startOfMonth=t=>this.adjustOffset(t.startOf("month")),this.startOfWeek=t=>this.adjustOffset(this.setLocaleToValue(t).startOf("week")),this.startOfDay=t=>this.adjustOffset(t.startOf("day")),this.endOfYear=t=>this.adjustOffset(t.endOf("year")),this.endOfMonth=t=>this.adjustOffset(t.endOf("month")),this.endOfWeek=t=>this.adjustOffset(this.setLocaleToValue(t).endOf("week")),this.endOfDay=t=>this.adjustOffset(t.endOf("day")),this.addYears=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"year"):t.add(a,"year")),this.addMonths=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"month"):t.add(a,"month")),this.addWeeks=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"week"):t.add(a,"week")),this.addDays=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"day"):t.add(a,"day")),this.addHours=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"hour"):t.add(a,"hour")),this.addMinutes=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"minute"):t.add(a,"minute")),this.addSeconds=(t,a)=>this.adjustOffset(a<0?t.subtract(Math.abs(a),"second"):t.add(a,"second")),this.getYear=t=>t.year(),this.getMonth=t=>t.month(),this.getDate=t=>t.date(),this.getHours=t=>t.hour(),this.getMinutes=t=>t.minute(),this.getSeconds=t=>t.second(),this.getMilliseconds=t=>t.millisecond(),this.setYear=(t,a)=>this.adjustOffset(t.set("year",a)),this.setMonth=(t,a)=>this.adjustOffset(t.set("month",a)),this.setDate=(t,a)=>this.adjustOffset(t.set("date",a)),this.setHours=(t,a)=>this.adjustOffset(t.set("hour",a)),this.setMinutes=(t,a)=>this.adjustOffset(t.set("minute",a)),this.setSeconds=(t,a)=>this.adjustOffset(t.set("second",a)),this.setMilliseconds=(t,a)=>this.adjustOffset(t.set("millisecond",a)),this.getDaysInMonth=t=>t.daysInMonth(),this.getWeekArray=t=>{const a=this.startOfWeek(this.startOfMonth(t)),l=this.endOfWeek(this.endOfMonth(t));let o=0,i=a;const s=[];for(;i<l;){const u=Math.floor(o/7);s[u]=s[u]||[],s[u].push(i),i=this.addDays(i,1),o+=1}return s},this.getWeekNumber=t=>t.week(),this.getYearRange=([t,a])=>{const l=this.startOfYear(t),o=this.endOfYear(a),i=[];let s=l;for(;this.isBefore(s,o);)i.push(s),s=this.addYears(s,1);return i},this.dayjs=Yi(ie,e),this.locale=e,this.formats=ee({},_i,r),ie.extend(ki)}getDayOfWeek(e){return e.day()+1}}const{loadShare:Pi}=Bn,{initPromise:Ui}=Wn,$i=Ui.then(n=>Pi("@iobroker/json-config",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"*"}}})),Fi=await $i.then(n=>n());var Hi=Fi;const ze=B.createContext(null),Gr=B.createContext(null);function zi(n){return{id:n.reduce((e,r)=>({id:Math.max(e.id,r.id)}),{id:Number.MIN_VALUE}).id+1,tsname:"",tsduration:"1",rules:[]}}function fr(n){return{id:n.reduce((e,r)=>({id:Math.max(e.id,r.id)}),{id:Number.MIN_VALUE}).id+1,name:"",interval:1,count:10,freq:3}}function hr(n){return{id:n.reduce((e,r)=>({id:Math.max(e.id,r.id)}),{id:Number.MIN_VALUE}).id+1,name:"",dates:[]}}function lt(){return B.useContext(Gr)}const rt={header:n=>({width:"99%",padding:"4px !important",borderRadius:"3px",marginBlockEnd:"1em",marginBlockStart:"1em"})};function ut({size:n,text:e,noTranslate:r}){r=r||!1,e=e||"",e=r?e:L.I18n.t(e);let t;switch((n||5).toString()){case"1":t=d.jsx(y.Box,{component:"h1",sx:rt.header,children:e});break;case"2":t=d.jsx(y.Box,{component:"h2",sx:rt.header,children:e});break;case"3":t=d.jsx(y.Box,{component:"h3",sx:rt.header,children:e});break;case"4":t=d.jsx(y.Box,{component:"h4",sx:rt.header,children:e});break;case"5":default:t=d.jsx(y.Box,{component:"h5",sx:rt.header,children:e})}return t}const We=B.createContext(null),qr=B.createContext(null);function Xe(){return B.useContext(qr)}var bt={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var Wi=bt.exports;(function(n,e){(function(r,t,a){var l=function(i,s,u){u=o.extend({},o.options,u);var f=o.runValidations(i,s,u);if(f.some(function(h){return o.isPromise(h.error)}))throw new Error("Use validate.async if you want support for promises");return l.processValidationResults(f,u)},o=l;o.extend=function(i){return[].slice.call(arguments,1).forEach(function(s){for(var u in s)i[u]=s[u]}),i},o.extend(l,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var i=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(i+="+"+o.version.metadata),i}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(i,s,u){var f=[],h,c,p,v,x,T,D;(o.isDomElement(i)||o.isJqueryElement(i))&&(i=o.collectFormValues(i));for(h in s){p=o.getDeepObjectValue(i,h),v=o.result(s[h],p,i,h,u,s);for(c in v){if(x=o.validators[c],!x)throw D=o.format("Unknown validator %{name}",{name:c}),new Error(D);T=v[c],T=o.result(T,p,i,h,u,s),T&&f.push({attribute:h,value:p,validator:c,globalOptions:u,attributes:i,options:T,error:x.call(x,p,T,h,i,u)})}}return f},processValidationResults:function(i,s){i=o.pruneEmptyErrors(i,s),i=o.expandMultipleErrors(i,s),i=o.convertErrorMessages(i,s);var u=s.format||"grouped";if(typeof o.formatters[u]=="function")i=o.formatters[u](i);else throw new Error(o.format("Unknown format %{format}",s));return o.isEmpty(i)?void 0:i},async:function(i,s,u){u=o.extend({},o.async.options,u);var f=u.wrapErrors||function(c){return c};u.cleanAttributes!==!1&&(i=o.cleanAttributes(i,s));var h=o.runValidations(i,s,u);return new o.Promise(function(c,p){o.waitForResults(h).then(function(){var v=o.processValidationResults(h,u);v?p(new f(v,u,i,s)):c(i)},function(v){p(v)})})},single:function(i,s,u){return u=o.extend({},o.single.options,u,{format:"flat",fullMessages:!1}),o({single:i},{single:s},u)},waitForResults:function(i){return i.reduce(function(s,u){return o.isPromise(u.error)?s.then(function(){return u.error.then(function(f){u.error=f||null})}):s},new o.Promise(function(s){s()}))},result:function(i){var s=[].slice.call(arguments,1);return typeof i=="function"&&(i=i.apply(null,s)),i},isNumber:function(i){return typeof i=="number"&&!isNaN(i)},isFunction:function(i){return typeof i=="function"},isInteger:function(i){return o.isNumber(i)&&i%1===0},isBoolean:function(i){return typeof i=="boolean"},isObject:function(i){return i===Object(i)},isDate:function(i){return i instanceof Date},isDefined:function(i){return i!=null},isPromise:function(i){return!!i&&o.isFunction(i.then)},isJqueryElement:function(i){return i&&o.isString(i.jquery)},isDomElement:function(i){return!i||!i.querySelectorAll||!i.querySelector?!1:o.isObject(document)&&i===document?!0:typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i!==null&&i.nodeType===1&&typeof i.nodeName=="string"},isEmpty:function(i){var s;if(!o.isDefined(i))return!0;if(o.isFunction(i))return!1;if(o.isString(i))return o.EMPTY_STRING_REGEXP.test(i);if(o.isArray(i))return i.length===0;if(o.isDate(i))return!1;if(o.isObject(i)){for(s in i)return!1;return!0}return!1},format:o.extend(function(i,s){return o.isString(i)?i.replace(o.format.FORMAT_REGEXP,function(u,f,h){return f==="%"?"%{"+h+"}":String(s[h])}):i},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(i){return o.isNumber(i)?i*100%1===0?""+i:parseFloat(Math.round(i*100)/100).toFixed(2):o.isArray(i)?i.map(function(s){return o.prettify(s)}).join(", "):o.isObject(i)?o.isDefined(i.toString)?i.toString():JSON.stringify(i):(i=""+i,i.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(s,u,f){return""+u+" "+f.toLowerCase()}).toLowerCase())},stringifyValue:function(i,s){var u=s&&s.prettify||o.prettify;return u(i)},isString:function(i){return typeof i=="string"},isArray:function(i){return{}.toString.call(i)==="[object Array]"},isHash:function(i){return o.isObject(i)&&!o.isArray(i)&&!o.isFunction(i)},contains:function(i,s){return o.isDefined(i)?o.isArray(i)?i.indexOf(s)!==-1:s in i:!1},unique:function(i){return o.isArray(i)?i.filter(function(s,u,f){return f.indexOf(s)==u}):i},forEachKeyInKeypath:function(i,s,u){if(o.isString(s)){var f="",h,c=!1;for(h=0;h<s.length;++h)switch(s[h]){case".":c?(c=!1,f+="."):(i=u(i,f,!1),f="");break;case"\\":c?(c=!1,f+="\\"):c=!0;break;default:c=!1,f+=s[h];break}return u(i,f,!0)}},getDeepObjectValue:function(i,s){if(o.isObject(i))return o.forEachKeyInKeypath(i,s,function(u,f){if(o.isObject(u))return u[f]})},collectFormValues:function(i,s){var u={},f,h,c,p,v,x;if(o.isJqueryElement(i)&&(i=i[0]),!i)return u;for(s=s||{},p=i.querySelectorAll("input[name], textarea[name]"),f=0;f<p.length;++f)if(c=p.item(f),!o.isDefined(c.getAttribute("data-ignored"))){var T=c.name.replace(/\./g,"\\\\.");x=o.sanitizeFormValue(c.value,s),c.type==="number"?x=x?+x:null:c.type==="checkbox"?c.attributes.value?c.checked||(x=u[T]||null):x=c.checked:c.type==="radio"&&(c.checked||(x=u[T]||null)),u[T]=x}for(p=i.querySelectorAll("select[name]"),f=0;f<p.length;++f)if(c=p.item(f),!o.isDefined(c.getAttribute("data-ignored"))){if(c.multiple){x=[];for(h in c.options)v=c.options[h],v&&v.selected&&x.push(o.sanitizeFormValue(v.value,s))}else{var D=typeof c.options[c.selectedIndex]<"u"?c.options[c.selectedIndex].value:"";x=o.sanitizeFormValue(D,s)}u[c.name]=x}return u},sanitizeFormValue:function(i,s){return s.trim&&o.isString(i)&&(i=i.trim()),s.nullify!==!1&&i===""?null:i},capitalize:function(i){return o.isString(i)?i[0].toUpperCase()+i.slice(1):i},pruneEmptyErrors:function(i){return i.filter(function(s){return!o.isEmpty(s.error)})},expandMultipleErrors:function(i){var s=[];return i.forEach(function(u){o.isArray(u.error)?u.error.forEach(function(f){s.push(o.extend({},u,{error:f}))}):s.push(u)}),s},convertErrorMessages:function(i,s){s=s||{};var u=[],f=s.prettify||o.prettify;return i.forEach(function(h){var c=o.result(h.error,h.value,h.attribute,h.options,h.attributes,h.globalOptions);if(!o.isString(c)){u.push(h);return}c[0]==="^"?c=c.slice(1):s.fullMessages!==!1&&(c=o.capitalize(f(h.attribute))+" "+c),c=c.replace(/\\\^/g,"^"),c=o.format(c,{value:o.stringifyValue(h.value,s)}),u.push(o.extend({},h,{error:c}))}),u},groupErrorsByAttribute:function(i){var s={};return i.forEach(function(u){var f=s[u.attribute];f?f.push(u):s[u.attribute]=[u]}),s},flattenErrorsToArray:function(i){return i.map(function(s){return s.error}).filter(function(s,u,f){return f.indexOf(s)===u})},cleanAttributes:function(i,s){function u(c,p,v){return o.isObject(c[p])?c[p]:c[p]=v?!0:{}}function f(c){var p={},v;for(v in c)c[v]&&o.forEachKeyInKeypath(p,v,u);return p}function h(c,p){if(!o.isObject(c))return c;var v=o.extend({},c),x,T;for(T in c)x=p[T],o.isObject(x)?v[T]=h(v[T],x):x||delete v[T];return v}return!o.isObject(s)||!o.isObject(i)?{}:(s=f(s),h(i,s))},exposeModule:function(i,s,u,f,h){u?(f&&f.exports&&(u=f.exports=i),u.validate=i):(s.validate=i,i.isFunction(h)&&h.amd&&h([],function(){return i}))},warn:function(i){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+i)},error:function(i){typeof console<"u"&&console.error&&console.error("[validate.js] "+i)}}),l.validators={presence:function(i,s){if(s=o.extend({},this.options,s),s.allowEmpty!==!1?!o.isDefined(i):o.isEmpty(i))return s.message||this.message||"can't be blank"},length:function(i,s,u){if(o.isDefined(i)){s=o.extend({},this.options,s);var f=s.is,h=s.maximum,c=s.minimum,p=s.tokenizer||function(D){return D},v,x=[];i=p(i);var T=i.length;if(!o.isNumber(T))return s.message||this.notValid||"has an incorrect length";if(o.isNumber(f)&&T!==f&&(v=s.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",x.push(o.format(v,{count:f}))),o.isNumber(c)&&T<c&&(v=s.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",x.push(o.format(v,{count:c}))),o.isNumber(h)&&T>h&&(v=s.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",x.push(o.format(v,{count:h}))),x.length>0)return s.message||x}},numericality:function(i,s,u,f,h){if(o.isDefined(i)){s=o.extend({},this.options,s);var c=[],p,v,x={greaterThan:function(g,M){return g>M},greaterThanOrEqualTo:function(g,M){return g>=M},equalTo:function(g,M){return g===M},lessThan:function(g,M){return g<M},lessThanOrEqualTo:function(g,M){return g<=M},divisibleBy:function(g,M){return g%M===0}},T=s.prettify||h&&h.prettify||o.prettify;if(o.isString(i)&&s.strict){var D="^-?(0|[1-9]\\d*)";if(s.onlyInteger||(D+="(\\.\\d+)?"),D+="$",!new RegExp(D).test(i))return s.message||s.notValid||this.notValid||this.message||"must be a valid number"}if(s.noStrings!==!0&&o.isString(i)&&!o.isEmpty(i)&&(i=+i),!o.isNumber(i))return s.message||s.notValid||this.notValid||this.message||"is not a number";if(s.onlyInteger&&!o.isInteger(i))return s.message||s.notInteger||this.notInteger||this.message||"must be an integer";for(p in x)if(v=s[p],o.isNumber(v)&&!x[p](i,v)){var m="not"+o.capitalize(p),k=s[m]||this[m]||this.message||"must be %{type} %{count}";c.push(o.format(k,{count:v,type:T(p)}))}if(s.odd&&i%2!==1&&c.push(s.notOdd||this.notOdd||this.message||"must be odd"),s.even&&i%2!==0&&c.push(s.notEven||this.notEven||this.message||"must be even"),c.length)return s.message||c}},datetime:o.extend(function(i,s){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(i)){s=o.extend({},this.options,s);var u,f=[],h=s.earliest?this.parse(s.earliest,s):NaN,c=s.latest?this.parse(s.latest,s):NaN;if(i=this.parse(i,s),isNaN(i)||s.dateOnly&&i%864e5!==0)return u=s.notValid||s.message||this.notValid||"must be a valid date",o.format(u,{value:arguments[0]});if(!isNaN(h)&&i<h&&(u=s.tooEarly||s.message||this.tooEarly||"must be no earlier than %{date}",u=o.format(u,{value:this.format(i,s),date:this.format(h,s)}),f.push(u)),!isNaN(c)&&i>c&&(u=s.tooLate||s.message||this.tooLate||"must be no later than %{date}",u=o.format(u,{date:this.format(c,s),value:this.format(i,s)}),f.push(u)),f.length)return o.unique(f)}},{parse:null,format:null}),date:function(i,s){return s=o.extend({},s,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,i,s)},format:function(i,s){(o.isString(s)||s instanceof RegExp)&&(s={pattern:s}),s=o.extend({},this.options,s);var u=s.message||this.message||"is invalid",f=s.pattern,h;if(o.isDefined(i)&&(!o.isString(i)||(o.isString(f)&&(f=new RegExp(s.pattern,s.flags)),h=f.exec(i),!h||h[0].length!=i.length)))return u},inclusion:function(i,s){if(o.isDefined(i)&&(o.isArray(s)&&(s={within:s}),s=o.extend({},this.options,s),!o.contains(s.within,i))){var u=s.message||this.message||"^%{value} is not included in the list";return o.format(u,{value:i})}},exclusion:function(i,s){if(o.isDefined(i)&&(o.isArray(s)&&(s={within:s}),s=o.extend({},this.options,s),!!o.contains(s.within,i))){var u=s.message||this.message||"^%{value} is restricted";return o.isString(s.within[i])&&(i=s.within[i]),o.format(u,{value:i})}},email:o.extend(function(i,s){s=o.extend({},this.options,s);var u=s.message||this.message||"is not a valid email";if(o.isDefined(i)&&(!o.isString(i)||!this.PATTERN.exec(i)))return u},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(i,s,u,f,h){if(o.isDefined(i)){o.isString(s)&&(s={attribute:s}),s=o.extend({},this.options,s);var c=s.message||this.message||"is not equal to %{attribute}";if(o.isEmpty(s.attribute)||!o.isString(s.attribute))throw new Error("The attribute must be a non empty string");var p=o.getDeepObjectValue(f,s.attribute),v=s.comparator||function(T,D){return T===D},x=s.prettify||h&&h.prettify||o.prettify;if(!v(i,p,s,u,f))return o.format(c,{attribute:x(s.attribute)})}},url:function(i,s){if(o.isDefined(i)){s=o.extend({},this.options,s);var u=s.message||this.message||"is not a valid url",f=s.schemes||this.schemes||["http","https"],h=s.allowLocal||this.allowLocal||!1,c=s.allowDataUrl||this.allowDataUrl||!1;if(!o.isString(i))return u;var p="^(?:(?:"+f.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(h?v+="?":p+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",p+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+v+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",c){var x="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",T="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",D="data:(?:"+x+")?(?:;base64)?,"+T;p="(?:"+p+")|(?:^"+D+"$)"}var m=new RegExp(p,"i");if(!m.exec(i))return u}},type:o.extend(function(i,s,u,f,h){if(o.isString(s)&&(s={type:s}),!!o.isDefined(i)){var c=o.extend({},this.options,s),p=c.type;if(!o.isDefined(p))throw new Error("No type was specified");var v;if(o.isFunction(p)?v=p:v=this.types[p],!o.isFunction(v))throw new Error("validate.validators.type.types."+p+" must be a function.");if(!v(i,c,u,f,h)){var x=s.message||this.messages[p]||this.message||c.message||(o.isFunction(p)?"must be of the correct type":"must be of type %{type}");return o.isFunction(x)&&(x=x(i,s,u,f,h)),o.format(x,{attribute:o.prettify(u),type:p})}}},{types:{object:function(i){return o.isObject(i)&&!o.isArray(i)},array:o.isArray,integer:o.isInteger,number:o.isNumber,string:o.isString,date:o.isDate,boolean:o.isBoolean},messages:{}})},l.formatters={detailed:function(i){return i},flat:o.flattenErrorsToArray,grouped:function(i){var s;i=o.groupErrorsByAttribute(i);for(s in i)i[s]=o.flattenErrorsToArray(i[s]);return i},constraint:function(i){var s;i=o.groupErrorsByAttribute(i);for(s in i)i[s]=i[s].map(function(u){return u.validator}).sort();return i}},l.exposeModule(l,this,r,t,a)}).call(Wi,e,n,null)})(bt,bt.exports);var Le=bt.exports,Ut=["MO","TU","WE","TH","FR","SA","SU"],De=(function(){function n(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return n.fromStr=function(e){return new n(Ut.indexOf(e))},n.prototype.nth=function(e){return this.n===e?this:new n(this.weekday,e)},n.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},n.prototype.toString=function(){var e=Ut[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},n.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},n})(),be=function(n){return n!=null},_e=function(n){return typeof n=="number"},mr=function(n){return typeof n=="string"&&Ut.includes(n)},Se=Array.isArray,Ae=function(n,e){e===void 0&&(e=n),arguments.length===1&&(e=n,n=0);for(var r=[],t=n;t<e;t++)r.push(t);return r},re=function(n,e){var r=0,t=[];if(Se(n))for(;r<e;r++)t[r]=[].concat(n);else for(;r<e;r++)t[r]=n;return t},Bi=function(n){return Se(n)?n:[n]};function qe(n,e,r){r===void 0&&(r=" ");var t=String(n);return e=e>>0,t.length>e?String(t):(e=e-t.length,e>r.length&&(r+=re(r,e/r.length)),r.slice(0,e)+String(t))}var Vi=function(n,e,r){var t=n.split(e);return r?t.slice(0,r).concat([t.slice(r).join(e)]):t},Oe=function(n,e){var r=n%e;return r*e<0?r+e:r},Rt=function(n,e){return{div:Math.floor(n/e),mod:Oe(n,e)}},Ye=function(n){return!be(n)||n.length===0},ve=function(n){return!Ye(n)},ue=function(n,e){return ve(n)&&n.indexOf(e)!==-1},Be=function(n,e,r,t,a,l){return t===void 0&&(t=0),a===void 0&&(a=0),l===void 0&&(l=0),new Date(Date.UTC(n,e-1,r,t,a,l))},Gi=[31,28,31,30,31,30,31,31,30,31,30,31],Kr=1e3*60*60*24,Zr=9999,Jr=Be(1970,1,1),qi=[6,0,1,2,3,4,5],st=function(n){return n%4===0&&n%100!==0||n%400===0},Qr=function(n){return n instanceof Date},it=function(n){return Qr(n)&&!isNaN(n.getTime())},Ki=function(n,e){var r=n.getTime(),t=e.getTime(),a=r-t;return Math.round(a/Kr)},$t=function(n){return Ki(n,Jr)},Xr=function(n){return new Date(Jr.getTime()+n*Kr)},Zi=function(n){var e=n.getUTCMonth();return e===1&&st(n.getUTCFullYear())?29:Gi[e]},Qe=function(n){return qi[n.getUTCDay()]},yr=function(n,e){var r=Be(n,e+1,1);return[Qe(r),Zi(r)]},en=function(n,e){return e=e||n,new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Ft=function(n){var e=new Date(n.getTime());return e},pr=function(n){for(var e=[],r=0;r<n.length;r++)e.push(Ft(n[r]));return e},at=function(n){n.sort(function(e,r){return e.getTime()-r.getTime()})},Jt=function(n,e){e===void 0&&(e=!0);var r=new Date(n);return[qe(r.getUTCFullYear().toString(),4,"0"),qe(r.getUTCMonth()+1,2,"0"),qe(r.getUTCDate(),2,"0"),"T",qe(r.getUTCHours(),2,"0"),qe(r.getUTCMinutes(),2,"0"),qe(r.getUTCSeconds(),2,"0"),e?"Z":""].join("")},Qt=function(n){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=e.exec(n);if(!r)throw new Error("Invalid UNTIL value: ".concat(n));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},br=function(n,e){var r=n.toLocaleString("sv-SE",{timeZone:e});return r.replace(" ","T")+"Z"},Ji=function(n,e){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,t=new Date(br(n,r)),a=new Date(br(n,e??"UTC")),l=a.getTime()-t.getTime();return new Date(n.getTime()-l)},Ze=(function(){function n(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return n.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,t=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(t)return!1}else if(this.method==="before"){if(t)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},n.prototype.add=function(e){return this._result.push(e),!0},n.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},n.prototype.clone=function(){return new n(this.method,this.args)},n})(),Ht=function(n,e){return Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])},Ht(n,e)};function Xt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ht(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ee=function(){return Ee=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++){r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Ee.apply(this,arguments)};function C(n,e,r){if(r||arguments.length===2)for(var t=0,a=e.length,l;t<a;t++)(l||!(t in e))&&(l||(l=Array.prototype.slice.call(e,0,t)),l[t]=e[t]);return n.concat(l||Array.prototype.slice.call(e))}var gr=(function(n){Xt(e,n);function e(r,t,a){var l=n.call(this,r,t)||this;return l.iterator=a,l}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e})(Ze),gt={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},vr=function(n,e){return n.indexOf(e)!==-1},Qi=function(n){return n.toString()},Xi=function(n,e,r){return"".concat(e," ").concat(r,", ").concat(n)},Ue=(function(){function n(e,r,t,a){if(r===void 0&&(r=Qi),t===void 0&&(t=gt),a===void 0&&(a=Xi),this.text=[],this.language=t||gt,this.gettext=r,this.dateFormatter=a,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var l=[].concat(this.options.bymonthday),o=[].concat(this.options.bynmonthday);l.sort(function(f,h){return f-h}),o.sort(function(f,h){return h-f}),this.bymonthday=l.concat(o),this.bymonthday.length||(this.bymonthday=null)}if(be(this.origOptions.byweekday)){var i=Se(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(i);this.byweekday={allWeeks:i.filter(function(f){return!f.n}),someWeeks:i.filter(function(f){return!!f.n}),isWeekdays:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")===-1&&s.indexOf("SU")===-1,isEveryDay:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")!==-1&&s.indexOf("SU")!==-1};var u=function(f,h){return f.weekday-h.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return n.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in n.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var t in e.origOptions){if(vr(["dtstart","tzid","wkst","freq"],t))return!0;if(!vr(n.IMPLEMENTED[e.options.freq],t))return!1}return r},n.prototype.isFullyConvertible=function(){return n.isFullyConvertible(this.rrule)},n.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in n.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[N.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},n.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},n.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},n.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},n.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},n.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},n.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},n.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},n.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},n.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},n.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},n.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,t=this.gettext;if(e===-1)return t("last");var a=Math.abs(e);switch(a){case 1:case 21:case 31:r=a+t("st");break;case 2:case 22:r=a+t("nd");break;case 3:case 23:r=a+t("rd");break;default:r=a+t("th")}return e<0?r+" "+t("last"):r},n.prototype.monthtext=function(e){return this.language.monthNames[e-1]},n.prototype.weekdaytext=function(e){var r=_e(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},n.prototype.plural=function(e){return e%100!==1},n.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},n.prototype.list=function(e,r,t,a){var l=this;a===void 0&&(a=","),Se(e)||(e=[e]);var o=function(s,u,f){for(var h="",c=0;c<s.length;c++)c!==0&&(c===s.length-1?h+=" "+f+" ":h+=u+" "),h+=s[c];return h};r=r||function(s){return s.toString()};var i=function(s){return r&&r.call(l,s)};return t?o(e.map(i),a,t):e.map(i).join(a+" ")},n})(),es=(function(){function n(e){this.done=!0,this.rules=e}return n.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},n.prototype.isDone=function(){return this.done&&this.symbol===null},n.prototype.nextSymbol=function(){var e,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var t=void 0;e=null;for(var a in this.rules){t=this.rules[a];var l=t.exec(this.text);l&&(e===null||l[0].length>e[0].length)&&(e=l,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},n.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},n.prototype.acceptNumber=function(){return this.accept("number")},n.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},n})();function tn(n,e){e===void 0&&(e=gt);var r={},t=new es(e.tokens);if(!t.start(n))return null;return a(),r;function a(){t.expect("every");var c=t.acceptNumber();if(c&&(r.interval=parseInt(c[0],10)),t.isDone())throw new Error("Unexpected end");switch(t.symbol){case"day(s)":r.freq=N.DAILY,t.nextSymbol()&&(o(),h());break;case"weekday(s)":r.freq=N.WEEKLY,r.byweekday=[N.MO,N.TU,N.WE,N.TH,N.FR],t.nextSymbol(),o(),h();break;case"week(s)":r.freq=N.WEEKLY,t.nextSymbol()&&(l(),o(),h());break;case"hour(s)":r.freq=N.HOURLY,t.nextSymbol()&&(l(),h());break;case"minute(s)":r.freq=N.MINUTELY,t.nextSymbol()&&(l(),h());break;case"month(s)":r.freq=N.MONTHLY,t.nextSymbol()&&(l(),h());break;case"year(s)":r.freq=N.YEARLY,t.nextSymbol()&&(l(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=N.WEEKLY;var p=t.symbol.substr(0,2).toUpperCase();if(r.byweekday=[N[p]],!t.nextSymbol())return;for(;t.accept("comma");){if(t.isDone())throw new Error("Unexpected end");var v=s();if(!v)throw new Error("Unexpected symbol "+t.symbol+", expected weekday");r.byweekday.push(N[v]),t.nextSymbol()}o(),f(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=N.YEARLY,r.bymonth=[i()],!t.nextSymbol())return;for(;t.accept("comma");){if(t.isDone())throw new Error("Unexpected end");var x=i();if(!x)throw new Error("Unexpected symbol "+t.symbol+", expected month");r.bymonth.push(x),t.nextSymbol()}l(),h();break;default:throw new Error("Unknown symbol")}}function l(){var c=t.accept("on"),p=t.accept("the");if(c||p)do{var v=u(),x=s(),T=i();if(v)x?(t.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(N[x].nth(v))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(v),t.accept("day(s)"));else if(x)t.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(N[x]);else if(t.symbol==="weekday(s)")t.nextSymbol(),r.byweekday||(r.byweekday=[N.MO,N.TU,N.WE,N.TH,N.FR]);else if(t.symbol==="week(s)"){t.nextSymbol();var D=t.acceptNumber();if(!D)throw new Error("Unexpected symbol "+t.symbol+", expected week number");for(r.byweekno=[parseInt(D[0],10)];t.accept("comma");){if(D=t.acceptNumber(),!D)throw new Error("Unexpected symbol "+t.symbol+"; expected monthday");r.byweekno.push(parseInt(D[0],10))}}else if(T)t.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(T);else return}while(t.accept("comma")||t.accept("the")||t.accept("on"))}function o(){var c=t.accept("at");if(c)do{var p=t.acceptNumber();if(!p)throw new Error("Unexpected symbol "+t.symbol+", expected hour");for(r.byhour=[parseInt(p[0],10)];t.accept("comma");){if(p=t.acceptNumber(),!p)throw new Error("Unexpected symbol "+t.symbol+"; expected hour");r.byhour.push(parseInt(p[0],10))}}while(t.accept("comma")||t.accept("at"))}function i(){switch(t.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function s(){switch(t.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return t.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(t.symbol){case"last":return t.nextSymbol(),-1;case"first":return t.nextSymbol(),1;case"second":return t.nextSymbol(),t.accept("last")?-2:2;case"third":return t.nextSymbol(),t.accept("last")?-3:3;case"nth":var c=parseInt(t.value[1],10);if(c<-366||c>366)throw new Error("Nth out of range: "+c);return t.nextSymbol(),t.accept("last")?-c:c;default:return!1}}function f(){t.accept("on"),t.accept("the");var c=u();if(c)for(r.bymonthday=[c],t.nextSymbol();t.accept("comma");){if(c=u(),!c)throw new Error("Unexpected symbol "+t.symbol+"; expected monthday");r.bymonthday.push(c),t.nextSymbol()}}function h(){if(t.symbol==="until"){var c=Date.parse(t.text);if(!c)throw new Error("Cannot parse until date:"+t.text);r.until=new Date(c)}else t.accept("for")&&(r.count=parseInt(t.value[0],10),t.expect("number"))}}var ne;(function(n){n[n.YEARLY=0]="YEARLY",n[n.MONTHLY=1]="MONTHLY",n[n.WEEKLY=2]="WEEKLY",n[n.DAILY=3]="DAILY",n[n.HOURLY=4]="HOURLY",n[n.MINUTELY=5]="MINUTELY",n[n.SECONDLY=6]="SECONDLY"})(ne||(ne={}));function er(n){return n<ne.HOURLY}var ts=function(n,e){return e===void 0&&(e=gt),new N(tn(n,e)||void 0)},et=["count","until","interval","byweekday","bymonthday","bymonth"];Ue.IMPLEMENTED=[];Ue.IMPLEMENTED[ne.HOURLY]=et;Ue.IMPLEMENTED[ne.MINUTELY]=et;Ue.IMPLEMENTED[ne.DAILY]=["byhour"].concat(et);Ue.IMPLEMENTED[ne.WEEKLY]=et;Ue.IMPLEMENTED[ne.MONTHLY]=et;Ue.IMPLEMENTED[ne.YEARLY]=["byweekno","byyearday"].concat(et);var rs=function(n,e,r,t){return new Ue(n,e,r,t).toString()},ns=Ue.isFullyConvertible,vt=(function(){function n(e,r,t,a){this.hour=e,this.minute=r,this.second=t,this.millisecond=a||0}return n.prototype.getHours=function(){return this.hour},n.prototype.getMinutes=function(){return this.minute},n.prototype.getSeconds=function(){return this.second},n.prototype.getMilliseconds=function(){return this.millisecond},n.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},n})(),is=(function(n){Xt(e,n);function e(r,t,a,l,o,i,s){var u=n.call(this,l,o,i,s)||this;return u.year=r,u.month=t,u.day=a,u}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return Qe(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var t=Math.floor(this.month/12),a=Oe(this.month,12);this.month=a,this.year+=t,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,t){t>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-t))+r*7:this.day+=-(this.getWeekday()-t)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,t,a){for(t&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var l=Rt(this.hour,24),o=l.div,i=l.mod;if(o&&(this.hour=i,this.addDaily(o)),Ye(a)||ue(a,this.hour))break}},e.prototype.addMinutes=function(r,t,a,l){for(t&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var o=Rt(this.minute,60),i=o.div,s=o.mod;if(i&&(this.minute=s,this.addHours(i,!1,a)),(Ye(a)||ue(a,this.hour))&&(Ye(l)||ue(l,this.minute)))break}},e.prototype.addSeconds=function(r,t,a,l,o){for(t&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var i=Rt(this.second,60),s=i.div,u=i.mod;if(s&&(this.second=u,this.addMinutes(s,!1,a,l)),(Ye(a)||ue(a,this.hour))&&(Ye(l)||ue(l,this.minute))&&(Ye(o)||ue(o,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=yr(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Zr))return;r=yr(this.year,this.month-1)[1]}}},e.prototype.add=function(r,t){var a=r.freq,l=r.interval,o=r.wkst,i=r.byhour,s=r.byminute,u=r.bysecond;switch(a){case ne.YEARLY:return this.addYears(l);case ne.MONTHLY:return this.addMonths(l);case ne.WEEKLY:return this.addWeekly(l,o);case ne.DAILY:return this.addDaily(l);case ne.HOURLY:return this.addHours(l,t,i);case ne.MINUTELY:return this.addMinutes(l,t,i,s);case ne.SECONDLY:return this.addSeconds(l,t,i,s,u)}},e})(vt);function rn(n){for(var e=[],r=Object.keys(n),t=0,a=r;t<a.length;t++){var l=a[t];ue(Rs,l)||e.push(l),Qr(n[l])&&!it(n[l])&&e.push(l)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Ee({},n)}function ss(n){var e=Ee(Ee({},tr),rn(n));if(be(e.byeaster)&&(e.freq=N.YEARLY),!(be(e.freq)&&N.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(n.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),be(e.wkst)?_e(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=N.MO.weekday,be(e.bysetpos)){_e(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var t=e.bysetpos[r];if(t===0||!(t>=-366&&t<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||ve(e.byweekno)||ve(e.byyearday)||e.bymonthday||ve(e.bymonthday)||be(e.byweekday)||be(e.byeaster)))switch(e.freq){case N.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case N.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case N.WEEKLY:e.byweekday=[Qe(e.dtstart)];break}if(be(e.bymonth)&&!Se(e.bymonth)&&(e.bymonth=[e.bymonth]),be(e.byyearday)&&!Se(e.byyearday)&&_e(e.byyearday)&&(e.byyearday=[e.byyearday]),!be(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Se(e.bymonthday)){for(var a=[],l=[],r=0;r<e.bymonthday.length;r++){var t=e.bymonthday[r];t>0?a.push(t):t<0&&l.push(t)}e.bymonthday=a,e.bynmonthday=l}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(be(e.byweekno)&&!Se(e.byweekno)&&(e.byweekno=[e.byweekno]),!be(e.byweekday))e.bynweekday=null;else if(_e(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(mr(e.byweekday))e.byweekday=[De.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof De)!e.byweekday.n||e.freq>N.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var o=[],i=[],r=0;r<e.byweekday.length;r++){var s=e.byweekday[r];if(_e(s)){o.push(s);continue}else if(mr(s)){o.push(De.fromStr(s).weekday);continue}!s.n||e.freq>N.MONTHLY?o.push(s.weekday):i.push([s.weekday,s.n])}e.byweekday=ve(o)?o:null,e.bynweekday=ve(i)?i:null}return be(e.byhour)?_e(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<N.HOURLY?[e.dtstart.getUTCHours()]:null,be(e.byminute)?_e(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<N.MINUTELY?[e.dtstart.getUTCMinutes()]:null,be(e.bysecond)?_e(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<N.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function as(n){var e=n.dtstart.getTime()%1e3;if(!er(n.freq))return[];var r=[];return n.byhour.forEach(function(t){n.byminute.forEach(function(a){n.bysecond.forEach(function(l){r.push(new vt(t,a,l,e))})})}),r}function zt(n){var e=n.split(`
`).map(os).filter(function(r){return r!==null});return Ee(Ee({},e[0]),e[1])}function xt(n){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(n);if(!r)return e;var t=r[1],a=r[2];return t&&(e.tzid=t),e.dtstart=Qt(a),e}function os(n){if(n=n.replace(/^\s+|\s+$/,""),!n.length)return null;var e=/^([A-Z]+?)[:;]/.exec(n.toUpperCase());if(!e)return xr(n);var r=e[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return xr(n);case"DTSTART":return xt(n);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(n))}}function xr(n){var e=n.replace(/^RRULE:/i,""),r=xt(e),t=n.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return t.forEach(function(a){var l=a.split("="),o=l[0],i=l[1];switch(o.toUpperCase()){case"FREQ":r.freq=ne[i.toUpperCase()];break;case"WKST":r.wkst=Ne[i.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var s=ls(i),u=o.toLowerCase();r[u]=s;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=us(i);break;case"DTSTART":case"TZID":var f=xt(n);r.tzid=f.tzid,r.dtstart=f.dtstart;break;case"UNTIL":r.until=Qt(i);break;case"BYEASTER":r.byeaster=Number(i);break;default:throw new Error("Unknown RRULE property '"+o+"'")}}),r}function ls(n){if(n.indexOf(",")!==-1){var e=n.split(",");return e.map(Tr)}return Tr(n)}function Tr(n){return/^[+-]?\d+$/.test(n)?Number(n):n}function us(n){var e=n.split(",");return e.map(function(r){if(r.length===2)return Ne[r];var t=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!t||t.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var a=Number(t[1]),l=t[2],o=Ne[l].weekday;return new De(o,a)})}var Tt=(function(){function n(e,r){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=r}return Object.defineProperty(n.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),n.prototype.toString=function(){var e=Jt(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},n.prototype.getTime=function(){return this.date.getTime()},n.prototype.rezonedDate=function(){return this.isUTC?this.date:Ji(this.date,this.tzid)},n})();function Wt(n){for(var e=[],r="",t=Object.keys(n),a=Object.keys(tr),l=0;l<t.length;l++)if(t[l]!=="tzid"&&ue(a,t[l])){var o=t[l].toUpperCase(),i=n[t[l]],s="";if(!(!be(i)||Se(i)&&!i.length)){switch(o){case"FREQ":s=N.FREQUENCIES[n.freq];break;case"WKST":_e(i)?s=new De(i).toString():s=i.toString();break;case"BYWEEKDAY":o="BYDAY",s=Bi(i).map(function(p){return p instanceof De?p:Se(p)?new De(p[0],p[1]):new De(p)}).toString();break;case"DTSTART":r=ds(i,n.tzid);break;case"UNTIL":s=Jt(i,!n.tzid);break;default:if(Se(i)){for(var u=[],f=0;f<i.length;f++)u[f]=String(i[f]);s=u.toString()}else s=String(i)}s&&e.push([o,s])}}var h=e.map(function(p){var v=p[0],x=p[1];return"".concat(v,"=").concat(x.toString())}).join(";"),c="";return h!==""&&(c="RRULE:".concat(h)),[r,c].filter(function(p){return!!p}).join(`
`)}function ds(n,e){return n?"DTSTART"+new Tt(new Date(n),e).toString():""}function cs(n,e){return Array.isArray(n)?!Array.isArray(e)||n.length!==e.length?!1:n.every(function(r,t){return r.getTime()===e[t].getTime()}):n instanceof Date?e instanceof Date&&n.getTime()===e.getTime():n===e}var fs=(function(){function n(){this.all=!1,this.before=[],this.after=[],this.between=[]}return n.prototype._cacheAdd=function(e,r,t){r&&(r=r instanceof Date?Ft(r):pr(r)),e==="all"?this.all=r:(t._value=r,this[e].push(t))},n.prototype._cacheGet=function(e,r){var t=!1,a=r?Object.keys(r):[],l=function(f){for(var h=0;h<a.length;h++){var c=a[h];if(!cs(r[c],f[c]))return!0}return!1},o=this[e];if(e==="all")t=this.all;else if(Se(o))for(var i=0;i<o.length;i++){var s=o[i];if(!(a.length&&l(s))){t=s._value;break}}if(!t&&this.all){for(var u=new Ze(e,r),i=0;i<this.all.length&&u.accept(this.all[i]);i++);t=u.getValue(),this._cacheAdd(e,t,r)}return Se(t)?pr(t):t instanceof Date?Ft(t):t},n})(),hs=C(C(C(C(C(C(C(C(C(C(C(C(C([],re(1,31),!0),re(2,28),!0),re(3,31),!0),re(4,30),!0),re(5,31),!0),re(6,30),!0),re(7,31),!0),re(8,31),!0),re(9,30),!0),re(10,31),!0),re(11,30),!0),re(12,31),!0),re(1,7),!0),ms=C(C(C(C(C(C(C(C(C(C(C(C(C([],re(1,31),!0),re(2,29),!0),re(3,31),!0),re(4,30),!0),re(5,31),!0),re(6,30),!0),re(7,31),!0),re(8,31),!0),re(9,30),!0),re(10,31),!0),re(11,30),!0),re(12,31),!0),re(1,7),!0),ys=Ae(1,29),ps=Ae(1,30),Fe=Ae(1,31),Te=Ae(1,32),bs=C(C(C(C(C(C(C(C(C(C(C(C(C([],Te,!0),ps,!0),Te,!0),Fe,!0),Te,!0),Fe,!0),Te,!0),Te,!0),Fe,!0),Te,!0),Fe,!0),Te,!0),Te.slice(0,7),!0),gs=C(C(C(C(C(C(C(C(C(C(C(C(C([],Te,!0),ys,!0),Te,!0),Fe,!0),Te,!0),Fe,!0),Te,!0),Te,!0),Fe,!0),Te,!0),Fe,!0),Te,!0),Te.slice(0,7),!0),vs=Ae(-28,0),xs=Ae(-29,0),He=Ae(-30,0),we=Ae(-31,0),Ts=C(C(C(C(C(C(C(C(C(C(C(C(C([],we,!0),xs,!0),we,!0),He,!0),we,!0),He,!0),we,!0),we,!0),He,!0),we,!0),He,!0),we,!0),we.slice(0,7),!0),ws=C(C(C(C(C(C(C(C(C(C(C(C(C([],we,!0),vs,!0),we,!0),He,!0),we,!0),He,!0),we,!0),we,!0),He,!0),we,!0),He,!0),we,!0),we.slice(0,7),!0),Ds=[0,31,60,91,121,152,182,213,244,274,305,335,366],ks=[0,31,59,90,120,151,181,212,243,273,304,334,365],wr=(function(){for(var n=[],e=0;e<55;e++)n=n.concat(Ae(7));return n})();function Ms(n,e){var r=Be(n,1,1),t=st(n)?366:365,a=st(n+1)?366:365,l=$t(r),o=Qe(r),i=Ee(Ee({yearlen:t,nextyearlen:a,yearordinal:l,yearweekday:o},Ss(n)),{wnomask:null});if(Ye(e.byweekno))return i;i.wnomask=re(0,t+7);var s,u,f=s=Oe(7-o+e.wkst,7);f>=4?(f=0,u=i.yearlen+Oe(o-e.wkst,7)):u=t-f;for(var h=Math.floor(u/7),c=Oe(u,7),p=Math.floor(h+c/4),v=0;v<e.byweekno.length;v++){var x=e.byweekno[v];if(x<0&&(x+=p+1),x>0&&x<=p){var T=void 0;x>1?(T=f+(x-1)*7,f!==s&&(T-=7-s)):T=f;for(var D=0;D<7&&(i.wnomask[T]=1,T++,i.wdaymask[T]!==e.wkst);D++);}}if(ue(e.byweekno,1)){var T=f+p*7;if(f!==s&&(T-=7-s),T<t)for(var v=0;v<7&&(i.wnomask[T]=1,T+=1,i.wdaymask[T]!==e.wkst);v++);}if(f){var m=void 0;if(ue(e.byweekno,-1))m=-1;else{var k=Qe(Be(n-1,1,1)),g=Oe(7-k.valueOf()+e.wkst,7),M=st(n-1)?366:365,$=void 0;g>=4?(g=0,$=M+Oe(k-e.wkst,7)):$=t-f,m=Math.floor(52+Oe($,7)/4)}if(ue(e.byweekno,m))for(var T=0;T<f;T++)i.wnomask[T]=1}return i}function Ss(n){var e=st(n)?366:365,r=Be(n,1,1),t=Qe(r);return e===365?{mmask:hs,mdaymask:gs,nmdaymask:ws,wdaymask:wr.slice(t),mrange:ks}:{mmask:ms,mdaymask:bs,nmdaymask:Ts,wdaymask:wr.slice(t),mrange:Ds}}function Es(n,e,r,t,a,l){var o={lastyear:n,lastmonth:e,nwdaymask:[]},i=[];if(l.freq===N.YEARLY)if(Ye(l.bymonth))i=[[0,r]];else for(var s=0;s<l.bymonth.length;s++)e=l.bymonth[s],i.push(t.slice(e-1,e+1));else l.freq===N.MONTHLY&&(i=[t.slice(e-1,e+1)]);if(Ye(i))return o;o.nwdaymask=re(0,r);for(var s=0;s<i.length;s++)for(var u=i[s],f=u[0],h=u[1]-1,c=0;c<l.bynweekday.length;c++){var p=void 0,v=l.bynweekday[c],x=v[0],T=v[1];T<0?(p=h+(T+1)*7,p-=Oe(a[p]-x,7)):(p=f+(T-1)*7,p+=Oe(7-a[p]+x,7)),f<=p&&p<=h&&(o.nwdaymask[p]=1)}return o}function js(n,e){e===void 0&&(e=0);var r=n%19,t=Math.floor(n/100),a=n%100,l=Math.floor(t/4),o=t%4,i=Math.floor((t+8)/25),s=Math.floor((t-i+1)/3),u=Math.floor(19*r+t-l-s+15)%30,f=Math.floor(a/4),h=a%4,c=Math.floor(32+2*o+2*f-u-h)%7,p=Math.floor((r+11*u+22*c)/451),v=Math.floor((u+c-7*p+114)/31),x=(u+c-7*p+114)%31+1,T=Date.UTC(n,v-1,x+e),D=Date.UTC(n,0,1);return[Math.ceil((T-D)/(1e3*60*60*24))]}var Cs=(function(){function n(e){this.options=e}return n.prototype.rebuild=function(e,r){var t=this.options;if(e!==this.lastyear&&(this.yearinfo=Ms(e,t)),ve(t.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var a=this.yearinfo,l=a.yearlen,o=a.mrange,i=a.wdaymask;this.monthinfo=Es(e,r,l,o,i,t)}be(t.byeaster)&&(this.eastermask=js(e,t.byeaster))},Object.defineProperty(n.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),n.prototype.ydayset=function(){return[Ae(this.yearlen),0,this.yearlen]},n.prototype.mdayset=function(e,r){for(var t=this.mrange[r-1],a=this.mrange[r],l=re(null,this.yearlen),o=t;o<a;o++)l[o]=o;return[l,t,a]},n.prototype.wdayset=function(e,r,t){for(var a=re(null,this.yearlen+7),l=$t(Be(e,r,t))-this.yearordinal,o=l,i=0;i<7&&(a[l]=l,++l,this.wdaymask[l]!==this.options.wkst);i++);return[a,o,l]},n.prototype.ddayset=function(e,r,t){var a=re(null,this.yearlen),l=$t(Be(e,r,t))-this.yearordinal;return a[l]=l,[a,l,l+1]},n.prototype.htimeset=function(e,r,t,a){var l=this,o=[];return this.options.byminute.forEach(function(i){o=o.concat(l.mtimeset(e,i,t,a))}),at(o),o},n.prototype.mtimeset=function(e,r,t,a){var l=this.options.bysecond.map(function(o){return new vt(e,r,o,a)});return at(l),l},n.prototype.stimeset=function(e,r,t,a){return[new vt(e,r,t,a)]},n.prototype.getdayset=function(e){switch(e){case ne.YEARLY:return this.ydayset.bind(this);case ne.MONTHLY:return this.mdayset.bind(this);case ne.WEEKLY:return this.wdayset.bind(this);case ne.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},n.prototype.gettimeset=function(e){switch(e){case ne.HOURLY:return this.htimeset.bind(this);case ne.MINUTELY:return this.mtimeset.bind(this);case ne.SECONDLY:return this.stimeset.bind(this)}},n})();function Os(n,e,r,t,a,l){for(var o=[],i=0;i<n.length;i++){var s=void 0,u=void 0,f=n[i];f<0?(s=Math.floor(f/e.length),u=Oe(f,e.length)):(s=Math.floor((f-1)/e.length),u=Oe(f-1,e.length));for(var h=[],c=r;c<t;c++){var p=l[c];be(p)&&h.push(p)}var v=void 0;s<0?v=h.slice(s)[0]:v=h[s];var x=e[u],T=Xr(a.yearordinal+v),D=en(T,x);ue(o,D)||o.push(D)}return at(o),o}function nn(n,e){var r=e.dtstart,t=e.freq,a=e.interval,l=e.until,o=e.bysetpos,i=e.count;if(i===0||a===0)return Pe(n);var s=is.fromDate(r),u=new Cs(e);u.rebuild(s.year,s.month);for(var f=Ls(u,s,e);;){var h=u.getdayset(t)(s.year,s.month,s.day),c=h[0],p=h[1],v=h[2],x=Ns(c,p,v,u,e);if(ve(o))for(var T=Os(o,f,p,v,u,c),D=0;D<T.length;D++){var m=T[D];if(l&&m>l)return Pe(n);if(m>=r){var k=Dr(m,e);if(!n.accept(k)||i&&(--i,!i))return Pe(n)}}else for(var D=p;D<v;D++){var g=c[D];if(be(g))for(var M=Xr(u.yearordinal+g),$=0;$<f.length;$++){var Z=f[$],m=en(M,Z);if(l&&m>l)return Pe(n);if(m>=r){var k=Dr(m,e);if(!n.accept(k)||i&&(--i,!i))return Pe(n)}}}if(e.interval===0||(s.add(e,x),s.year>Zr))return Pe(n);er(t)||(f=u.gettimeset(t)(s.hour,s.minute,s.second,0)),u.rebuild(s.year,s.month)}}function Is(n,e,r){var t=r.bymonth,a=r.byweekno,l=r.byweekday,o=r.byeaster,i=r.bymonthday,s=r.bynmonthday,u=r.byyearday;return ve(t)&&!ue(t,n.mmask[e])||ve(a)&&!n.wnomask[e]||ve(l)&&!ue(l,n.wdaymask[e])||ve(n.nwdaymask)&&!n.nwdaymask[e]||o!==null&&!ue(n.eastermask,e)||(ve(i)||ve(s))&&!ue(i,n.mdaymask[e])&&!ue(s,n.nmdaymask[e])||ve(u)&&(e<n.yearlen&&!ue(u,e+1)&&!ue(u,-n.yearlen+e)||e>=n.yearlen&&!ue(u,e+1-n.yearlen)&&!ue(u,-n.nextyearlen+e-n.yearlen))}function Dr(n,e){return new Tt(n,e.tzid).rezonedDate()}function Pe(n){return n.getValue()}function Ns(n,e,r,t,a){for(var l=!1,o=e;o<r;o++){var i=n[o];l=Is(t,i,a),l&&(n[i]=null)}return l}function Ls(n,e,r){var t=r.freq,a=r.byhour,l=r.byminute,o=r.bysecond;return er(t)?as(r):t>=N.HOURLY&&ve(a)&&!ue(a,e.hour)||t>=N.MINUTELY&&ve(l)&&!ue(l,e.minute)||t>=N.SECONDLY&&ve(o)&&!ue(o,e.second)?[]:n.gettimeset(t)(e.hour,e.minute,e.second,e.millisecond)}var Ne={MO:new De(0),TU:new De(1),WE:new De(2),TH:new De(3),FR:new De(4),SA:new De(5),SU:new De(6)},tr={freq:ne.YEARLY,dtstart:null,interval:1,wkst:Ne.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Rs=Object.keys(tr),N=(function(){function n(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new fs,this.origOptions=rn(e);var t=ss(e).parsedOptions;this.options=t}return n.parseText=function(e,r){return tn(e,r)},n.fromText=function(e,r){return ts(e,r)},n.fromString=function(e){return new n(n.parseString(e)||void 0)},n.prototype._iter=function(e){return nn(e,this.options)},n.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},n.prototype._cacheAdd=function(e,r,t){if(this._cache)return this._cache._cacheAdd(e,r,t)},n.prototype.all=function(e){if(e)return this._iter(new gr("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Ze("all",{})),this._cacheAdd("all",r)),r},n.prototype.between=function(e,r,t,a){if(t===void 0&&(t=!1),!it(e)||!it(r))throw new Error("Invalid date passed in to RRule.between");var l={before:r,after:e,inc:t};if(a)return this._iter(new gr("between",l,a));var o=this._cacheGet("between",l);return o===!1&&(o=this._iter(new Ze("between",l)),this._cacheAdd("between",o,l)),o},n.prototype.before=function(e,r){if(r===void 0&&(r=!1),!it(e))throw new Error("Invalid date passed in to RRule.before");var t={dt:e,inc:r},a=this._cacheGet("before",t);return a===!1&&(a=this._iter(new Ze("before",t)),this._cacheAdd("before",a,t)),a},n.prototype.after=function(e,r){if(r===void 0&&(r=!1),!it(e))throw new Error("Invalid date passed in to RRule.after");var t={dt:e,inc:r},a=this._cacheGet("after",t);return a===!1&&(a=this._iter(new Ze("after",t)),this._cacheAdd("after",a,t)),a},n.prototype.count=function(){return this.all().length},n.prototype.toString=function(){return Wt(this.origOptions)},n.prototype.toText=function(e,r,t){return rs(this,e,r,t)},n.prototype.isFullyConvertibleToText=function(){return ns(this)},n.prototype.clone=function(){return new n(this.origOptions)},n.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],n.YEARLY=ne.YEARLY,n.MONTHLY=ne.MONTHLY,n.WEEKLY=ne.WEEKLY,n.DAILY=ne.DAILY,n.HOURLY=ne.HOURLY,n.MINUTELY=ne.MINUTELY,n.SECONDLY=ne.SECONDLY,n.MO=Ne.MO,n.TU=Ne.TU,n.WE=Ne.WE,n.TH=Ne.TH,n.FR=Ne.FR,n.SA=Ne.SA,n.SU=Ne.SU,n.parseString=zt,n.optionsToString=Wt,n})();function _s(n,e,r,t,a,l){var o={},i=n.accept;function s(c,p){r.forEach(function(v){v.between(c,p,!0).forEach(function(x){o[Number(x)]=!0})})}a.forEach(function(c){var p=new Tt(c,l).rezonedDate();o[Number(p)]=!0}),n.accept=function(c){var p=Number(c);return isNaN(p)?i.call(this,c):!o[p]&&(s(new Date(p-1),new Date(p+1)),!o[p])?(o[p]=!0,i.call(this,c)):!0},n.method==="between"&&(s(n.args.after,n.args.before),n.accept=function(c){var p=Number(c);return o[p]?!0:(o[p]=!0,i.call(this,c))});for(var u=0;u<t.length;u++){var f=new Tt(t[u],l).rezonedDate();if(!n.accept(new Date(f.getTime())))break}e.forEach(function(c){nn(n,c.options)});var h=n._result;switch(at(h),n.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var kr={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Ys(n,e){var r=[],t=[],a=[],l=[],o=xt(n),i=o.dtstart,s=o.tzid,u=Fs(n,e.unfold);return u.forEach(function(f){var h;if(f){var c=$s(f),p=c.name,v=c.parms,x=c.value;switch(p.toUpperCase()){case"RRULE":if(v.length)throw new Error("unsupported RRULE parm: ".concat(v.join(",")));r.push(zt(f));break;case"RDATE":var T=(h=/RDATE(?:;TZID=([^:=]+))?/i.exec(f))!==null&&h!==void 0?h:[],D=T[1];D&&!s&&(s=D),t=t.concat(Sr(x,v));break;case"EXRULE":if(v.length)throw new Error("unsupported EXRULE parm: ".concat(v.join(",")));a.push(zt(x));break;case"EXDATE":l=l.concat(Sr(x,v));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:i,tzid:s,rrulevals:r,rdatevals:t,exrulevals:a,exdatevals:l}}function As(n,e){var r=Ys(n,e),t=r.rrulevals,a=r.rdatevals,l=r.exrulevals,o=r.exdatevals,i=r.dtstart,s=r.tzid,u=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||t.length>1||a.length||l.length||o.length){var f=new zs(u);return f.dtstart(i),f.tzid(s||void 0),t.forEach(function(c){f.rrule(new N(_t(c,i,s),u))}),a.forEach(function(c){f.rdate(c)}),l.forEach(function(c){f.exrule(new N(_t(c,i,s),u))}),o.forEach(function(c){f.exdate(c)}),e.compatible&&e.dtstart&&f.rdate(i),f}var h=t[0]||{};return new N(_t(h,h.dtstart||e.dtstart||i,h.tzid||e.tzid||s),u)}function Mr(n,e){return e===void 0&&(e={}),As(n,Ps(e))}function _t(n,e,r){return Ee(Ee({},n),{dtstart:e,tzid:r})}function Ps(n){var e=[],r=Object.keys(n),t=Object.keys(kr);if(r.forEach(function(a){ue(t,a)||e.push(a)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Ee(Ee({},kr),n)}function Us(n){if(n.indexOf(":")===-1)return{name:"RRULE",value:n};var e=Vi(n,":",1),r=e[0],t=e[1];return{name:r,value:t}}function $s(n){var e=Us(n),r=e.name,t=e.value,a=r.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:t}}function Fs(n,e){if(e===void 0&&(e=!1),n=n&&n.trim(),!n)throw new Error("Invalid empty string");if(!e)return n.split(/\s/);for(var r=n.split(`
`),t=0;t<r.length;){var a=r[t]=r[t].replace(/\s+$/g,"");a?t>0&&a[0]===" "?(r[t-1]+=a.slice(1),r.splice(t,1)):t+=1:r.splice(t,1)}return r}function Hs(n){n.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Sr(n,e){return Hs(e),n.split(",").map(function(r){return Qt(r)})}function Er(n){var e=this;return function(r){if(r!==void 0&&(e["_".concat(n)]=r),e["_".concat(n)]!==void 0)return e["_".concat(n)];for(var t=0;t<e._rrule.length;t++){var a=e._rrule[t].origOptions[n];if(a)return a}}}var zs=(function(n){Xt(e,n);function e(r){r===void 0&&(r=!1);var t=n.call(this,{},r)||this;return t.dtstart=Er.apply(t,["dtstart"]),t.tzid=Er.apply(t,["tzid"]),t._rrule=[],t._rdate=[],t._exrule=[],t._exdate=[],t}return e.prototype._iter=function(r){return _s(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){jr(r,this._rrule)},e.prototype.exrule=function(r){jr(r,this._exrule)},e.prototype.rdate=function(r){Cr(r,this._rdate)},e.prototype.exdate=function(r){Cr(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return Mr(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return Mr(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Wt({dtstart:this._dtstart}))),this._rrule.forEach(function(t){r=r.concat(t.toString().split(`
`))}),this._exrule.forEach(function(t){r=r.concat(t.toString().split(`
`).map(function(a){return a.replace(/^RRULE:/,"EXRULE:")}).filter(function(a){return!/^DTSTART/.test(a)}))}),this._rdate.length&&r.push(Or("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(Or("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(t){return r.rrule(t.clone())}),this._exrule.forEach(function(t){return r.exrule(t.clone())}),this._rdate.forEach(function(t){return r.rdate(new Date(t.getTime()))}),this._exdate.forEach(function(t){return r.exdate(new Date(t.getTime()))}),r},e})(N);function jr(n,e){if(!(n instanceof N))throw new TypeError(String(n)+" is not RRule instance");ue(e.map(String),String(n))||e.push(n)}function Cr(n,e){if(!(n instanceof Date))throw new TypeError(String(n)+" is not Date instance");ue(e.map(Number),Number(n))||(e.push(n),at(e))}function Or(n,e,r){var t=!r||r.toUpperCase()==="UTC",a=t?"".concat(n,":"):"".concat(n,";TZID=").concat(r,":"),l=e.map(function(o){return Jt(o.valueOf(),t)}).join(",");return"".concat(a).concat(l)}function rr(){const n=B.useContext(ze),e=B.useContext(We),r=Xe(),t=e.selectedTimeseriesID?n.find(c=>c.id===e.selectedTimeseriesID):null,a=e.selectedRuleID&&t?t.rules.find(c=>c.id===e.selectedRuleID):null;function l(c){const p={tsname:{presence:!0,uniqueRulename:!0,length:{minimum:1,tooShort:"^tsValidLength"}},tsduration:{presence:!0,numericality:{strict:!1,onlyInteger:!0,greaterThan:0,lessThan:1e3,notValid:"^tsValidNotValid",notInteger:"^tsValidNotInteger",notGreaterThan:"^tsValidNotGreaterThan0",notLessThan:"^tsValidNotLessThan1000"}}};return Le.validators.uniqueRulename=(v,x,T,D)=>n.reduce((m,k)=>k.tsname===v&&k.id!==D.id?m+1:m,0)>0?"^tsValidUniqueTimeseriesName":null,Le.validate(c,p)}function o(c){return c!=null}function i(c){return typeof c=="number"}function s(c,p){switch(p=p||"",c){case"bysetpos":case"bymonthday":case"byyearday":case"byweekno":{Array.isArray(p)||(p=p.split(/[,\s]+/)),p=p.filter(v=>v),p=p.map(v=>parseInt(v,10));break}}return p}function u(c){const p={name:{presence:!0,uniqueRulename:!0,length:{minimum:1,tooShort:"^tsValidLength"}},bysetpos:{rangeRuleNot0:{range:[[-366,-1],[1,366]],msg:"^tsValidRange366"}},bymonthday:{rangeRuleNot0:{range:[[-31,-1],[1,31]],msg:"^tsValidRange31"}},byyearday:{rangeRuleNot0:{range:[[-366,-1],[1,366]],msg:"^tsValidRange366"}},byweekno:{rangeRuleNot0:{range:[[-53,-1],[1,53]],msg:"^tsValidRange53"}},byhour:{byNumberList:{greaterThan:-1e6,lessThan:1e6,notNumbers:"^tsValidNotValid",notIntegers:"^tsValidNotInteger",notGreaterThan:"^tsValidByhourNotGreaterThan1000000",notLessThan:"^tsValidNotLessThan"}},byminute:{byNumberList:{greaterThan:-1e6,lessThan:1e6,notNumbers:"^tsValidNotValid",notIntegers:"^tsValidNotInteger",notGreaterThan:"^tsValidNotGreaterThan1000000",notLessThan:"^tsValidNotLessThan"}},bysecond:{byNumberList:{greaterThan:-1e6,lessThan:1e6,notNumbers:"^tsValidNotValid",notIntegers:"^tsValidNotInteger",notGreaterThan:"^tsValidNotGreaterThan1000000",notLessThan:"^tsValidNotLessThan"}},interval:{numericality:{strict:!1,onlyInteger:!0,greaterThan:0,lessThan:1e3,notValid:"^tsValidNotValid",notInteger:"^tsValidNotInteger",notGreaterThan:"^tsValidNotGreaterThan0",notLessThan:"^tsValidNotLessThan"}},count:{numericality:{strict:!0,onlyInteger:!0,greaterThan:0,lessThan:1e3,notValid:"^tsValidNotValid",notInteger:"^tsValidNotInteger",notGreaterThan:"^tsValidNotGreaterThan0",notLessThan:"^tsValidNotLessThan"}},freq:{freqSuntimes:!0,freqMoontimes:!0},suntimes:{freqSuntimes:!0},moontimes:{freqMoontimes:!0},latitude:{presence:function(v,x){return x.suntimes&&x.suntimes.length>0||x.moontimes&&x.moontimes.length>0},numericality:{greaterThanOrEqualTo:-90,lessThanOrEqualTo:90}},longitude:{presence:function(v,x){return x.suntimes&&x.suntimes.length>0||x.moontimes&&x.moontimes.length>0},numericality:{greaterThanOrEqualTo:-180,lessThanOrEqualTo:180}}};return Le.validators.uniqueRulename=(v,x,T,D)=>t.rules.reduce((m,k)=>k.name===v&&k.id!==D.id?m+1:m,0)>0?"^tsValidUniqueRulename":null,Le.validators.rangeRuleNot0=(v,x,T)=>{if(v=s(T,v),o(v)){i(v)&&(v=[v]);for(let D=0;D<v.length;D++){const m=parseInt(v[D])||0;if(m===0||!x.range.some(([k,g])=>m>=k&&m<=g))return x.msg}}else return null;return null},Le.validators.freqSuntimes=(v,x,T)=>Array.isArray(a.suntimes)&&a.freq>N.DAILY&&a.suntimes.length>0?"^tsValidFreqSuntimes":null,Le.validators.freqMoontimes=(v,x,T)=>Array.isArray(a.moontimes)&&a.freq>N.DAILY&&a.moontimes.length>0?"^tsValidFreqMoontimes":null,Le.validators.byNumberList=(v,x,T)=>v==null?null:v.includes(",")&&v.split(",").map(D=>parseInt(D)).some(isNaN)?x.notNumbers||"^tsNumberListnotContainNumbersNotDefined":v.includes(",")&&v.split(",").some(D=>Number(D)==D&&!Number.isInteger(Number(D)))?x.notIntegers||"^tsNumberListNotIntegers":x&&typeof x.greaterThan=="number"&&v.split(",").map(m=>parseInt(m)).filter(m=>!(m>x.greaterThan)).length?x.notGreaterThan||"^tsNumberListGreaterThanNotDefined":x&&typeof x.lessThan=="number"&&v.split(",").map(m=>parseInt(m)).filter(m=>!(m<x.lessThan)).length?x.notLessThan||"^tsNumberListLessThanNotDefined":null,Le.validate(c,p)}function f(c){const p={name:{presence:!0,uniqueRulename:!0,length:{minimum:1,tooShort:"^tsValidLength"}},dates:{presence:!0,length:{minimum:1,tooShort:"^tsValidArrayLength"}}};return Le.validators.uniqueRulename=(v,x,T,D)=>t.rules.reduce((m,k)=>k.name===v&&k.id!==D.id?m+1:m,0)>0?"^tsValidUniqueRulename":null,Le.validate(c,p)}function h(){let c=null,p=null,v=null;p=l(t),e.isRuleEditing&&(c=u(a)),e.isDateEditing&&(v=f(a)),r({type:"errors",value:{timeseries:p,rule:c,date:v}})}return h}function ke({title:n,children:e,props:r}){return d.jsx(y.Tooltip,{title:d.jsx("div",{dangerouslySetInnerHTML:{__html:n}}),enterDelay:1e3,placement:"top-start",...r,children:e})}const nt=[{tab:"main",title:"name",attr:"name",type:"text",tooltip:"tsNameTooltip"},{tab:"base",title:"frequency",attr:"freq",type:"radio",tooltip:"tsFreqTooltip",childs:[{label:"yearly",value:N.YEARLY},{label:"monthly",value:N.MONTHLY},{label:"weekly",value:N.WEEKLY},{label:"daily",value:N.DAILY},{label:"hourly",value:N.HOURLY},{label:"minutely",value:N.MINUTELY}]},{tab:"base",type:"newline"},{tab:"base",title:"start date",attr:"dtstart",type:"datetime-local",tooltip:"tsStartTooltip",default:"now"},{tab:"base",title:"until date",attr:"until",type:"datetime-local",tooltip:"tsUntilTooltip"},{tab:"base",type:"newline"},{tab:"base",title:"count",attr:"count",type:"text",tooltip:"tsCountTooltip"},{tab:"base",type:"newline"},{tab:"base",title:"interval",attr:"interval",type:"text",tooltip:"tsIntervalTooltip"},{tab:"base",type:"newline"},{tab:"ext1",title:"weekstart",attr:"weekstart",type:"radio",tooltip:"tsWeekstartTooltip",childs:[{label:"Monday",value:N.MO.weekday},{label:"Tuesday",value:N.TU.weekday},{label:"Wednsday",value:N.WE.weekday},{label:"Thursday",value:N.TH.weekday},{label:"Friday",value:N.FR.weekday},{label:"Saturday",value:N.SA.weekday},{label:"Sunday",value:N.SU.weekday}]},{tab:"ext1",title:"byweekday",attr:"byweekday",type:"checkbox",tooltip:"tsByweekdayTooltip",format:1,childs:[{label:"Monday",value:N.MO},{label:"Tuesday",value:N.TU},{label:"Wednsday",value:N.WE},{label:"Thursday",value:N.TH},{label:"Friday",value:N.FR},{label:"Saturday",value:N.SA},{label:"Sunday",value:N.SU}]},{tab:"ext1",title:"bymonth",attr:"bymonth",type:"checkbox",tooltip:"tsBymonthTooltip",format:1,childs:[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}]},{tab:"ext2",title:"bysetpos",attr:"bysetpos",type:"text",tooltip:"tsBysetposTooltip"},{tab:"ext2",type:"newline"},{tab:"ext2",title:"bymonthday",attr:"bymonthday",type:"text",tooltip:"tsBymonthdayTooltip"},{tab:"ext2",type:"newline"},{tab:"ext2",title:"byyearday",attr:"byyearday",type:"text",tooltip:"tsByyeardayTooltip"},{tab:"ext2",type:"newline"},{tab:"ext2",title:"byweekno",attr:"byweekno",type:"text",tooltip:"tsByweeknoTooltip"},{tab:"ext2",type:"newline"},{tab:"ext2",title:"byminute",attr:"byminute",type:"text",tooltip:"tsByminuteTooltip"},{tab:"ext2",type:"newline"},{tab:"ext2",title:"byhour",attr:"byhour",type:"text",tooltip:"tsByhourTooltip"},{tab:"astro",title:"tsLatitude",attr:"latitude",type:"text",tooltip:"tsLatitudeTooltip"},{tab:"astro",title:"tsLongitude",attr:"longitude",type:"text",tooltip:"tsLongitudeTooltip"},{tab:"astro",type:"newline"},{tab:"astro",title:"tsSuntimes",attr:"suntimes",type:"checkbox",tooltip:"tsSuntimesTooltip",format:2,childs:[{label:"tsAstronomicalDawn",value:"astronomicalDawn",tooltip:"tsAstronomicalDawnTooltip"},{label:"tsAmateurDawn",value:"amateurDawn",tooltip:"tsAmateurDawnTooltip"},{label:"tsNauticalDawn",value:"nauticalDawn",tooltip:"tsNauticalDawnTooltip"},{label:"tsBlueHourDawnStart",value:"blueHourDawnStart",tooltip:"tsBlueHourDawnStartTooltip"},{label:"tsCivilDawn",value:"civilDawn",tooltip:"tsCivilDawnTooltip"},{label:"tsBlueHourDawnEnd",value:"blueHourDawnEnd",tooltip:"tsBlueHourDawnEndTooltip"},{label:"tsGoldenHourDawnStart",value:"goldenHourDawnStart",tooltip:"tsGoldenHourDawnStartTooltip"},{label:"tsSunriseStart",value:"sunriseStart",tooltip:"tsSunriseStartTooltip"},{label:"tsSunriseEnd",value:"sunriseEnd",tooltip:"tsSunriseEndTooltip"},{label:"tsGoldenHourDawnEnd",value:"goldenHourDawnEnd",tooltip:"tsGoldenHourDawnEndTooltip"},{label:"tsSolarNoon",value:"solarNoon",tooltip:"tsSolarNoonTooltip"},{label:"tsGoldenHourDuskStart",value:"goldenHourDuskStart",tooltip:"tsGoldenHourDuskStartTooltip"},{label:"tsSunsetStart",value:"sunsetStart",tooltip:"tsSunsetStartTooltip"},{label:"tsSunsetEnd",value:"sunsetEnd",tooltip:"tsSunsetEndTooltip"},{label:"tsGoldenHourDuskEnd",value:"goldenHourDuskEnd",tooltip:"tsGoldenHourDuskEndTooltip"},{label:"tsBlueHourDuskStart",value:"blueHourDuskStart",tooltip:"tsBlueHourDuskStartTooltip"},{label:"tsCivilDusk",value:"civilDusk",tooltip:"tsCivilDuskTooltip"},{label:"tsBlueHourDuskEnd",value:"blueHourDuskEnd",tooltip:"tsBlueHourDuskEndTooltip"},{label:"tsNauticalDusk",value:"nauticalDusk",tooltip:"tsNauticalDuskTooltip"},{label:"tsAmateurDusk",value:"amateurDusk",tooltip:"tsAmateurDuskTooltip"},{label:"tsAstronomicalDusk",value:"astronomicalDusk",tooltip:"tsAstronomicalDuskTooltip"},{label:"tsNadir",value:"nadir",tooltip:"tsNadirTooltip"}]},{tab:"astro",type:"newline"},{tab:"astro",title:"tsMoontimes",attr:"moontimes",type:"checkbox",tooltip:"tsMoontimesTooltip",format:3,childs:[{label:"tsMoonrise",value:"moonrise",tooltip:"tsMoonriseTooltip"},{label:"tsMoonhigh",value:"moonhigh",tooltip:"tsMoonhighTooltip"},{label:"tsMoonset",value:"moonset",tooltip:"tsMoonsetTooltip"}]},{tab:"astro",type:"newline"}];function ht(n){const{children:e,value:r,index:t,...a}=n;return d.jsx("div",{role:"tabpanel",hidden:r!==t,id:`simple-tabpanel-${t}`,"aria-labelledby":`simple-tab-${t}`,...a,children:r===t&&d.jsx(y.Grid,{container:!0,size:12,children:e})},`simple-tabpanel-${t}`)}function Re(n,e,r){var a;const t=(a=n.errors)==null?void 0:a[e];return t&&Object.prototype.hasOwnProperty.call(t,r)?L.I18n.t(t[r].join("")):null}function Ws(){const[n,e]=B.useState(0),r=B.useContext(ze),t=lt(),a=B.useContext(We),l=Xe(),o=rr(),i=a.selectedTimeseriesID?r.find(m=>m.id===a.selectedTimeseriesID):null,s=a.selectedRuleID&&i?i.rules.find(m=>m.id===a.selectedRuleID):null,u={textPadding:{padding:"0px 10px 0px 0px"},radioCheckLabel:{fontSize:"12px"},radioCheckIconSize:{"& .MuiSvgIcon-root":{fontSize:18}},datetimeMargin:{marginRight:"10px"},fontDatetime:{"& .MuiInputBase-input":{fontSize:"12px"},"& .MuiInputLabel-root":{fontSize:"12px"}},tabFlex:{"& .MuiTabs-flexContainer":{flexWrap:"wrap"}}};B.useEffect(()=>{a.origRule||l({type:"origRule",value:s})},[a.origRule,s]),B.useEffect(()=>{o()},[s]),B.useEffect(()=>{var m,k,g;l({type:"isBack",value:Object.values(((m=a.errors)==null?void 0:m.timeseries)||{}).some(M=>M!==null)||Object.values(((k=a.errors)==null?void 0:k.rule)||{}).some(M=>M!==null)||Object.values(((g=a.errors)==null?void 0:g.date)||{}).some(M=>M!==null)})},[a.errors]);function f(m){return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:8,lg:4,xl:4,children:d.jsx(ke,{title:L.I18n.t(m.tooltip),children:d.jsx(y.TextField,{fullWidth:!0,name:m.attr,label:L.I18n.t(m.title),variant:"standard",type:m.type||"text",onChange:k=>{const g=k.target.value===""?void 0:k.target.value,M={type:"rule-field-change",tsid:i.id,rid:s.id,field:k.target.name,value:g};t(M)},error:Re(a,"rule",m.attr)!==null,helperText:Re(a,"rule",m.attr),tooltip:L.I18n.t(m.tooltip),size:"small",margin:"dense",value:s[m.attr]||"",inputProps:{style:{fontSize:12}},InputLabelProps:{style:{fontSize:12}},sx:{...u.textPadding}},m.attr)})},m.attr)}function h(m){return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:d.jsx(ke,{title:L.I18n.t(m.tooltip),children:d.jsx(y.TextField,{name:m.attr,label:L.I18n.t(m.title),select:m.type==="select",value:s[m.attr]||"",type:m.type||"text",onChange:k=>{const g={type:"rule-field-change",tsid:i.id,rid:s.id,field:k.target.name,value:Number(k.target.value)};t(g)},error:Re(a,"rule",m.attr)!==null,helperText:Re(a,"rule",m.attr),size:"small",margin:"dense",children:m.childs&&m.childs.map(k=>d.jsx(y.MenuItem,{value:k.value,children:k.label},k.value))},m.attr)})},m.attr)}function c(m){return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:d.jsx(ke,{title:L.I18n.t(m.tooltip),children:d.jsx(y.Box,{children:d.jsxs(y.FormControl,{component:"fieldset",error:Re(a,"rule",m.attr)!==null,children:[d.jsx(y.FormLabel,{component:"legend",sx:{...u.radioCheckLabel},children:L.I18n.t(m.title)}),d.jsxs(y.Grid,{container:!0,spacing:0,children:[d.jsx(y.RadioGroup,{row:!0,"aria-label":m.attr,name:m.attr,onChange:k=>{const g={type:"rule-field-change",tsid:i.id,rid:s.id,field:k.target.name,value:Number(k.target.value)};t(g)},children:m.childs&&m.childs.map(k=>d.jsx(y.Grid,{item:!0,children:d.jsx(y.FormControlLabel,{checked:s[m.attr]===k.value,value:k.value,control:d.jsx(y.Radio,{}),label:d.jsx("span",{style:{...u.radioCheckLabel},children:L.I18n.t(k.label)}),sx:{...u.radioCheckIconSize}})},m.attr+k.value))}),Re(a,"rule",m.attr)&&d.jsx(y.FormHelperText,{component:"div",error:!0,children:Re(a,"rule",m.attr)})]})]})},m.attr)})},m.attr)}function p(m){let k;switch(m.format){case 1:k={xs:3,sm:4,md:3,lg:2};break;case 2:k={xs:6,sm:6,md:4,lg:3};break;case 3:k={xs:4,sm:4,md:4,lg:4};break;default:k={xs:3,sm:4,md:3,lg:2};break}return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:d.jsx(ke,{title:L.I18n.t(m.tooltip),children:d.jsxs(y.FormControl,{component:"fieldset",error:Re(a,"rule",m.attr)!==null,children:[d.jsx(y.FormLabel,{component:"legend",sx:{...u.radioCheckLabel},children:L.I18n.t(m.title)}),d.jsx(y.Grid,{container:!0,children:d.jsx(y.FormGroup,{row:!0,children:m.childs&&m.childs.map(g=>d.jsx(y.Grid,{item:!0,...k,children:d.jsx(ke,{title:g.tooltip&&L.I18n.t(g.tooltip)||"",children:d.jsx(y.FormControlLabel,{sx:{width:"100%"},control:d.jsx(y.Checkbox,{checked:(s[m.attr]||[]).some(M=>JSON.stringify(M)===JSON.stringify(g.value)),inputProps:{"data-state":`${m.attr}_${JSON.stringify(g.value)}`},onChange:M=>{const[$,Z]=M.target.dataset.state.split("_"),Q={type:"rule-field-change-array",tsid:i.id,rid:s.id,field:$,value:JSON.parse(Z),checked:M.target.checked};t(Q)},name:g.value.toString(),sx:{...u.radioCheckIconSize}}),label:d.jsx("span",{style:{...u.radioCheckLabel},children:L.I18n.t(g.label)})})})},m.attr+g.value))})}),Re(a,"rule",m.attr)&&d.jsx(y.FormHelperText,{component:"div",error:!0,children:Re(a,"rule",m.attr)})]},m.attr)})},m.attr)}function v(m,k){return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:d.jsx(y.Box,{size:12})},`newline${k}`)}function x(m){let k=null;return m.default==="now"&&(!s[m.attr]||s[m.attr]==="")&&(s[m.attr]=ie()),d.jsx(y.Grid,{sx:{...u.datetimeMargin},item:!0,xs:5,sm:5,md:5,lg:4,xl:4,children:d.jsx(ke,{title:L.I18n.t(m.tooltip),children:d.jsx(y.Box,{children:d.jsxs(y.Stack,{direction:"row",alignItems:"flex-end",children:[d.jsx(Pt,{label:L.I18n.t(m.title),sx:{...u.fontDatetime},views:["year","month","day","hours","minutes","seconds"],ampm:!1,slotProps:{textField:{size:"small",variant:"standard"}},formatDensity:"dense",value:s[m.attr]&&ie(s[m.attr])||null,defaultValue:k,onChange:g=>{const M={type:"rule-field-change",tsid:i.id,rid:s.id,field:m.attr,value:ie(g).toISOString()};t(M)}},m.attr),d.jsx(y.IconButton,{size:"small",onClick:()=>{const g={type:"rule-field-change",tsid:i.id,rid:s.id,field:m.attr,value:null};t(g)},children:d.jsx(Ie.Cancel,{fontSize:"small"})})]})})})},m.attr)}const T=(m,k)=>{e(k)};function D(m,k){return m.type==="text"?f(m):m.type==="select"?h(m):m.type==="radio"?c(m):m.type==="checkbox"?p(m):m.type==="datetime-local"?x(m):m.type==="newline"?v(m,k):f(m)}return d.jsxs(y.Box,{children:[d.jsxs(y.Box,{children:[d.jsx(ut,{text:s.mode==="rule-add"?"tsEditRuleAdd":"tsEditRuleDel"}),d.jsxs(y.Tabs,{value:n,onChange:T,sx:{...u.tabFlex},children:[d.jsx(y.Tab,{label:L.I18n.t("tsBase")},"base"),d.jsx(y.Tab,{label:L.I18n.t("tsExt1")},"ext1"),d.jsx(y.Tab,{label:L.I18n.t("tsExt2")},"ext2"),d.jsx(y.Tab,{label:L.I18n.t("tsAstro")},"astro")]})]}),d.jsxs(y.Box,{children:[d.jsx(y.Box,{children:nt.filter(m=>m.tab==="main").map((m,k)=>D(m,k))}),d.jsx(ht,{value:n,index:0,children:nt.filter(m=>m.tab==="base").map((m,k)=>D(m,k))},"tab0"),d.jsx(ht,{value:n,index:1,children:nt.filter(m=>m.tab==="ext1").map((m,k)=>D(m,k))},"tab1"),d.jsx(ht,{value:n,index:2,children:nt.filter(m=>m.tab==="ext2").map((m,k)=>D(m,k))},"tab2"),d.jsx(ht,{value:n,index:3,children:nt.filter(m=>m.tab==="astro").map((m,k)=>D(m,k))},"tab3")]})]})}const Ir=[{tab:"main",title:"name",attr:"name",type:"text",tooltip:"Name of the rule. If empty a Number is used"},{tab:"base",title:"date",attr:"date",type:"datetime-local-add",tooltip:"A single date."},{tab:"base",title:"List",attr:"list",type:"date-list",tooltip:"All entered dates."}];function Ke(n,e,r){var a;r==="date"&&(r="dates");const t=(a=n.errors)==null?void 0:a[e];return t&&Object.prototype.hasOwnProperty.call(t,r)?L.I18n.t(t[r].join("")):null}function Bs({sx:n}){const e=B.useContext(ze),r=lt(),t=B.useContext(We),a=Xe(),l=rr(),[o,i]=B.useState(null),s=t.selectedTimeseriesID?e.find(g=>g.id===t.selectedTimeseriesID):null,u=t.selectedRuleID&&s?s.rules.find(g=>g.id===t.selectedRuleID):null;B.useEffect(()=>{t.origRule||a({type:"origRule",value:u})},[t.origRule,u]),B.useEffect(()=>{l()},[u]),B.useEffect(()=>{var g,M,$;a({type:"isBack",value:Object.values(((g=t.errors)==null?void 0:g.timeseries)||{}).some(Z=>Z!==null)||Object.values(((M=t.errors)==null?void 0:M.rule)||{}).some(Z=>Z!==null)||Object.values((($=t.errors)==null?void 0:$.date)||{}).some(Z=>Z!==null)})},[t.errors]),o||i(ie().hour(0).minute(0).second(0).add(1,"day"));const f={styleTableCellWide:{padding:"4px",width:"90%",...n},styleTableCellSmall:{padding:"4px",width:"10%",...n},gridMargin:{marginTop:"8px",marginBottom:"4px"},table:{marginTop:"8px",marginBottom:"16px"},tablescroll:{overflow:"auto",maxHeight:"250px",display:"table-row"},text:{padding:"0px 10px 0px 0px"},select:{width:"80%"},fontDatetime:{"& .MuiInputBase-input":{fontSize:"12px"},"& .MuiInputLabel-root":{fontSize:"12px"}}};function h(g){return d.jsx(y.Grid,{item:!0,xs:12,sm:12,md:8,lg:4,xl:4,sx:{...f.gridMargin},children:d.jsx(ke,{title:L.I18n.t(g.tooltip),children:d.jsx(y.TextField,{fullWidth:!0,name:g.attr,label:L.I18n.t(g.title),variant:"standard",type:g.type||"text",onChange:M=>{const $=M.target.value===""?void 0:M.target.value,Z={type:"rule-field-change",tsid:s.id,rid:u.id,field:M.target.name,value:$};r(Z)},error:Ke(t,"date",g.attr)!==null,helperText:Ke(t,"date",g.attr),tooltip:L.I18n.t(g.tooltip),size:"small",margin:"dense",value:u[g.attr],inputProps:{style:{fontSize:12}},InputLabelProps:{style:{fontSize:12}},sx:{...f.text}},g.attr)})},g.attr)}function c(g){return d.jsx(y.TextField,{sx:{...f.select},name:g.attr,label:L.I18n.t(g.title),select:g.type==="select",value:u[g.attr],type:g.type||"text",onChange:M=>{const $={type:"rule-field-change",tsid:s.id,rid:u.id,field:M.target.name,value:Number(M.target.value)};r($)},error:t.errors.date[g.attr]&&t.errors.date[g.attr]!==null,helperText:t.errors.date[g.attr],size:"small",margin:"dense",children:g.childs&&g.childs.map(M=>d.jsx(y.MenuItem,{value:M.value,children:M.label},M.value))},g.attr)}function p(g){return d.jsx(y.Box,{children:d.jsxs(y.FormControl,{component:"fieldset",children:[d.jsx(y.FormLabel,{component:"legend",children:L.I18n.t(g.title)}),d.jsx(y.Grid,{container:!0,spacing:0,children:d.jsx(y.RadioGroup,{row:!0,"aria-label":g.attr,name:g.attr,onChange:M=>{const $={type:"rule-field-change",tsid:s.id,rid:u.id,field:M.target.name,value:Number(M.target.value)};r($)},children:g.childs&&g.childs.map(M=>d.jsx(y.Grid,{item:!0,children:d.jsx(y.FormControlLabel,{checked:u[g.attr]===M.value,value:M.value,control:d.jsx(y.Radio,{}),label:L.I18n.t(M.label)})},g.attr+M.value))})})]})},g.attr)}function v(g){return d.jsxs(y.FormControl,{component:"fieldset",children:[d.jsx(y.FormLabel,{component:"legend",children:L.I18n.t(g.title)}),d.jsx(y.Grid,{container:!0,children:d.jsx(y.FormGroup,{row:!0,children:g.childs&&g.childs.map(M=>d.jsx(y.Grid,{item:!0,xs:3,children:d.jsx(y.FormControlLabel,{control:d.jsx(y.Checkbox,{inputProps:{"data-state":`${g.attr}_${M.value}`},onChange:$=>{const Z={type:"rule-field-change",tsid:s.id,rid:u.id,field:$.target.name,value:$.target.checked};r(Z)},name:M.value.toString()}),label:L.I18n.t(M.label)})},g.attr+M.value))})})]},g.attr)}function x(g){return d.jsx(Pt,{label:L.I18n.t(g.title),views:["year","month","day","hours","minutes","seconds"],format:"DD.MM.YYYY HH:mm:ss",inputFormat:"DD.MM.YYYY HH:mm:ss",ampm:!1,slotProps:{textField:{size:"small"}},value:ie(u[g.attr]||void 0),onChange:M=>{const $={type:"rule-field-change",tsid:s.id,rid:u.id,field:g.attr,value:ie(M).toISOString()};r($)},renderInput:()=>d.jsx(y.TextField,{helperText:Ke(t,"date",g.attr)!==null,error:Ke(t,"date",g.attr)!==null})},g.attr)}function T(g,M){return ie(g).valueOf()-ie(M).valueOf()}function D(g){return d.jsx(y.Grid,{item:!0,sx:{...f.table},xs:12,sm:12,md:8,lg:6,xl:6,children:d.jsxs(y.Table,{children:[d.jsx(y.TableHead,{sx:{...f.tablescroll},children:d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...f.styleTableCellWide},children:L.I18n.t("tsDate")}),d.jsx(y.TableCell,{sx:{...f.styleTableCellSmall},children:L.I18n.t("tsActions")})]})}),d.jsxs(y.TableBody,{sx:{...f.tablescroll},children:[u.dates.length>0&&u.dates.sort(T).map(M=>d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...f.styleTableCellWide},children:ie(M).format("DD.MM.YYYY HH:mm")}),d.jsx(y.TableCell,{sx:{...f.styleTableCellSmall},children:d.jsx(y.Stack,{direction:"row",children:d.jsx(y.IconButton,{onClick:()=>{const $=u.dates.filter(Q=>Q!==M),Z={type:"rule-field-change",tsid:t.selectedTimeseriesID,rid:t.selectedRuleID,field:"dates",value:$};r(Z)},children:d.jsx(Ie.Delete,{})})})})]},M)),u.dates.length===0&&d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...f.styleTableCellWide},children:"List empty"}),d.jsx(y.TableCell,{sx:{...f.styleTableCellSmall},children:" "})]},"emptyList")]})]})},g.attr)}function m(g){return L.I18n.t(g.tooltip),d.jsxs(y.Grid,{container:!0,spacing:1,sx:{...f.gridMargin},children:[d.jsx(y.Grid,{item:!0,children:d.jsx(ke,{title:L.I18n.t(g.tooltip),children:d.jsx(y.Box,{children:d.jsx(Pt,{label:L.I18n.t(g.title),sx:{...f.fontDatetime},views:["year","month","day","hours","minutes","seconds"],ampm:!1,formatDensity:"dense",slotProps:{textField:{size:"small",variant:"standard",helperText:Ke(t,"date",g.attr),error:Ke(t,"date",g.attr)!==null}},value:o,onChange:M=>{i(M)}},g.attr)})})},"datetime"),d.jsx(y.Grid,{item:!0,children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(Ie.Add,{}),onClick:()=>{const M=[...u.dates,ie(o.second(0).millisecond(0)).toISOString()],$={type:"rule-field-change",tsid:t.selectedTimeseriesID,rid:t.selectedRuleID,field:"dates",value:M};r($),i(o.second(0).add(1,"day"))},variant:"contained",children:L.I18n.t("add")})},"button")]},g.attr)}function k(g){return g.type==="text"?h(g):g.type==="select"?c(g):g.type==="radio"?p(g):g.type==="checkbox"?v(g):g.type==="datetime-local"?x(g):g.type==="datetime-local-add"?m(g):g.type==="date-list"?D(g):h(g)}return d.jsxs(y.Box,{children:[d.jsx(y.Box,{children:d.jsx(ut,{text:u.mode==="rule-add"?"tsEditDateAdd":"tsEditDateDel"})}),d.jsx(y.Box,{children:Ir.filter(g=>g.tab==="main").map(g=>k(g))}),d.jsx(y.Box,{children:Ir.filter(g=>g.tab==="base").map(g=>k(g))})]})}function sn(n){return d.jsx(wt,{...n,children:d.jsx("path",{fill:"currentColor",d:"m12.993 9.0904h-1.9861v2.9792h-2.9792v1.9861h2.9792v2.9792h1.9861v-2.9792h2.9792v-1.9861h-2.9792zm-5.0844-5.571-1.2711-1.5194-4.568 3.8232 1.281 1.5194zm14.022 2.3138-4.568-3.8332-1.281 1.5194 4.568 3.8332zm-9.9305-1.7081c-4.9355 0-8.9374 4.002-8.9374 8.9374 0 4.9355 3.9921 8.9374 8.9374 8.9374 4.9355 0 8.9374-4.002 8.9374-8.9374 0-4.9354-4.002-8.9374-8.9374-8.9374m0 15.889c-3.8431 0-6.9513-3.1083-6.9513-6.9514 0-3.8431 3.1082-6.9513 6.9513-6.9513s6.9513 3.1083 6.9513 6.9513c0 3.8431-3.1082 6.9514-6.9513 6.9514"})})}function an(n){return d.jsx(wt,{...n,children:d.jsx("path",{fill:"currentColor",d:"m7.0347 12.042v1.9861h9.9305v-1.9861zm0.87391-8.5222-1.2711-1.5194-4.568 3.8232 1.281 1.5194zm14.022 2.3138-4.568-3.8332-1.281 1.5194 4.568 3.8332zm-9.9305-1.7081c-4.9355 0-8.9374 4.002-8.9374 8.9375 0 4.9355 3.9921 8.9374 8.9374 8.9374 4.9355 0 8.9374-4.002 8.9374-8.9374 0-4.9354-4.002-8.9375-8.9374-8.9375m0 15.889c-3.8431 0-6.9513-3.1083-6.9513-6.9514 0-3.8431 3.1082-6.9513 6.9513-6.9513s6.9513 3.1083 6.9513 6.9513c0 3.8431-3.1082 6.9514-6.9513 6.9514"})})}function on(n){return d.jsx(wt,{...n,children:d.jsx("path",{fill:"currentColor",d:"m7.4546 12.909v1.8182h9.0909v-1.8182zm11.818-9.0909h-0.90909v-1.8182h-1.8182v1.8182h-9.0909v-1.8182h-1.8182v1.8182h-0.90908c-1 0-1.8182 0.81817-1.8182 1.8182v14.545c0 1 0.8182 1.8182 1.8182 1.8182h14.545c0.99999 0 1.8182-0.81816 1.8182-1.8182v-14.545c0-1-0.8182-1.8182-1.8182-1.8182m0 16.364h-14.545v-11.818h14.545z"})})}function ln(n){return d.jsx(wt,{...n,children:d.jsx("path",{fill:"currentColor",d:"m12.909 10.207h-1.8182v2.7273h-2.7273v1.8182h2.7273v2.7273h1.8182v-2.7273h2.7273v-1.8182h-2.7273zm6.3636-6.3892h-0.90907v-1.8182h-1.8182v1.8182h-9.0909v-1.8182h-1.8182v1.8182h-0.90908c-0.99999 0-1.8182 0.81817-1.8182 1.8182v14.546c0 0.99998 0.81821 1.8182 1.8182 1.8182h14.545c1 0 1.8182-0.81817 1.8182-1.8182v-14.546c0-0.99998-0.8182-1.8182-1.8182-1.8182m0 16.364h-14.545v-11.818h14.545z"})})}function un({rulemode:n}){switch(n){case"rule-add":return d.jsx(sn,{});case"rule-del":return d.jsx(an,{});case"date-add":return d.jsx(ln,{});case"date-del":return d.jsx(on,{});default:return""}}function Vs({style:n,rules:e,timeseriesDispatch:r,navStateDispatch:t,navState:a}){return d.jsxs(y.Table,{sx:{...n.tableWidth},children:[d.jsx(y.TableHead,{sx:{...n.tableHeader},children:d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...n.styleTableCellWide},children:L.I18n.t("tsrRulename")}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall},children:L.I18n.t("tsrType")}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall},children:L.I18n.t("tsActions")})]})}),d.jsxs(y.TableBody,{children:[e.length>0&&e.map(l=>d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...n.styleTableCellWide},children:l.name}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall},children:d.jsx(un,{rulemode:l.mode})}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall},children:d.jsxs(y.Stack,{direction:"row",children:[d.jsx(y.IconButton,{onClick:()=>{switch(t({type:"isRuleNew",value:!1}),t({type:"selectedRuleID",value:l.id}),l.mode.split("-")[0]){case"rule":t({type:"isRuleEditing",value:!0});break;case"date":t({type:"isDateEditing",value:!0});break}},children:d.jsx(Ie.Edit,{})}),d.jsx(y.IconButton,{onClick:()=>{r({type:"rule-delete",tsid:a.selectedTimeseriesID,rid:l.id})},children:d.jsx(Ie.Delete,{})})]})})]},l.id)),e.length===0&&d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:{...n.styleTableCellWide},children:L.I18n.t("tsTableListEmpty")}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall}}),d.jsx(y.TableCell,{sx:{...n.styleTableCellSmall}})]},"empty")]})]})}function Gs({style:n,rules:e,timeseriesDispatch:r,navStateDispatch:t,navState:a}){return d.jsx(y.Stack,{spacing:1,children:e.map(l=>d.jsx(y.Card,{children:d.jsxs(y.Paper,{elevation:3,children:[d.jsx(y.CardActionArea,{onClick:()=>{switch(t({type:"isRuleNew",value:!1}),t({type:"selectedRuleID",value:l.id}),l.mode.split("-")[0]){case"rule":t({type:"isRuleEditing",value:!0});break;case"date":t({type:"isDateEditing",value:!0});break}},children:d.jsx(y.CardContent,{children:d.jsxs(y.Stack,{direction:"row",sx:{justifyContent:"space-between",alignItems:"flex-start"},children:[d.jsx(y.Typography,{gutterBottom:!0,variant:"h5",component:"div",children:l.name}),d.jsx(un,{rulemode:l.mode})]})})}),d.jsxs(y.Box,{sx:{...n.boxCard},children:[d.jsx(y.IconButton,{onClick:()=>{switch(t({type:"isRuleNew",value:!1}),t({type:"selectedRuleID",value:l.id}),l.mode.split("-")[0]){case"rule":t({type:"isRuleEditing",value:!0});break;case"date":t({type:"isDateEditing",value:!0});break}},children:d.jsx(Ie.Edit,{})}),d.jsx(y.IconButton,{onClick:()=>{r({type:"rule-delete",tsid:a.selectedTimeseriesID,rid:l.id})},children:d.jsx(Ie.Delete,{})})]})]})},l.id))})}function qs({sx:n}){const e=B.useContext(ze),r=lt(),t=B.useContext(We),a=Xe(),l=Fr(h=>h.breakpoints.down("md")),o=e.find(h=>h.id===t.selectedTimeseriesID).rules,i={styleTableCellWide:{...n,padding:"4px",width:"60%"},styleTableCellSmall:{...n,padding:"4px",width:"20%"},table:{marginTop:"8px",marginBottom:"16px"},button:{height:"100%",fontSize:"12px"},tableWidth:{width:"100%"},boxCard:{display:"flex",alignItems:"center",pl:1,pb:1}};function s(){return d.jsx(Ws,{})}function u(){return d.jsx(Bs,{})}function f(){return d.jsxs(y.Grid,{container:!0,spacing:1,children:[d.jsx(y.Grid,{item:!0,xs:12,children:d.jsx(ut,{size:4,text:"tsNewTimerule"})}),d.jsx(y.Grid,{item:!0,xs:12,children:d.jsxs(y.Grid,{container:!0,spacing:1,children:[d.jsx(y.Grid,{item:!0,xs:12,sm:12,lg:6,xl:3,children:d.jsx(ke,{title:L.I18n.t("tsRuleAddTooltip"),children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(sn,{}),fullWidth:!0,sx:{...i.button},onClick:()=>{const h=fr(o);h.mode="rule-add",r({type:"rule-add",tsid:t.selectedTimeseriesID,item:h}),a({type:"isRuleNew",value:!0}),a({type:"selectedRuleID",value:h.id}),a({type:"isRuleEditing",value:!0})},variant:"contained",children:L.I18n.t("tsNewTimeruleAdd")})})}),d.jsx(y.Grid,{item:!0,xs:12,sm:12,lg:6,xl:3,children:d.jsx(ke,{title:L.I18n.t("tsRuleDelTooltip"),children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(an,{}),fullWidth:!0,sx:{...i.button},onClick:()=>{const h=fr(o);h.mode="rule-del",r({type:"rule-add",tsid:t.selectedTimeseriesID,item:h}),a({type:"isRuleNew",value:!0}),a({type:"selectedRuleID",value:h.id}),a({type:"isRuleEditing",value:!0})},variant:"contained",children:L.I18n.t("tsNewTimeruleDel")})})}),d.jsx(y.Grid,{item:!0,xs:12,sm:12,lg:6,xl:3,children:d.jsx(ke,{title:L.I18n.t("tsDatelistAddTooltip"),children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(ln,{}),fullWidth:!0,sx:{...i.button},onClick:()=>{const h=hr(o);h.mode="date-add",h.dates=[],r({type:"rule-add",tsid:t.selectedTimeseriesID,item:h}),a({type:"isRuleNew",value:!0}),a({type:"selectedRuleID",value:h.id}),a({type:"isDateEditing",value:!0})},variant:"contained",children:L.I18n.t("tsNewDatelistAdd")})})}),d.jsx(y.Grid,{item:!0,xs:12,sm:12,lg:6,xl:3,children:d.jsx(ke,{title:L.I18n.t("tsDatelistDelTooltip"),children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(on,{}),fullWidth:!0,sx:{...i.button},onClick:()=>{const h=hr(o);h.mode="date-del",h.dates=[],r({type:"rule-add",tsid:t.selectedTimeseriesID,item:h}),a({type:"isRuleNew",value:!0}),a({type:"selectedRuleID",value:h.id}),a({type:"isDateEditing",value:!0})},variant:"contained",children:L.I18n.t("tsNewDatelistDel")})})})]})}),d.jsx(y.Grid,{item:!0,sx:{...i.table},xs:12,sm:12,md:10,lg:10,xl:10,children:d.jsxs(y.Box,{children:[!l&&d.jsx(Vs,{style:i,rules:o,timeseriesDispatch:r,navStateDispatch:a,navState:t}),l&&d.jsx(Gs,{style:i,rules:o,timeseriesDispatch:r,navStateDispatch:a,navState:t})]})})]},"ruleslist")}return t.isRuleEditing?s():t.isDateEditing?u():f()}var dn={exports:{}};(function(n,e){(function(){const r=Math.sin,t=Math.cos,a=Math.tan,l=Math.asin,o=Math.atan2,i=Math.acos,s=Math.PI/180,u=180/Math.PI,f=864e5,h=24405875e-1,c=2451545,p=2551442778,v=94717884e4;function x(w){return(w-h)*f}function T(w){return w/f+h-c}const D=s*23.4397;function m(w,S){return o(r(w)*t(D)-a(S)*r(D),t(w))}function k(w,S){return l(r(S)*t(D)+t(S)*r(D)*r(w))}function g(w,S,j){return o(r(w),t(w)*r(S)-a(j)*t(S))+Math.PI}function M(w,S,j){return l(r(S)*r(j)+t(S)*t(j)*t(w))}function $(w,S){return s*(280.16+360.9856235*w)-S}function Z(w){return w<0&&(w=0),2967e-7/Math.tan(w+.00312536/(w+.08901179))}function Q(w){return s*(357.5291+.98560028*w)}function pe(w){const S=s*(1.9148*r(w)+.02*r(2*w)+3e-4*r(3*w)),j=s*102.9372;return w+S+j+Math.PI}function q(w){const S=Q(w),j=pe(S);return{dec:k(j,0),ra:m(j,0)}}const R={};R.getPosition=function(w,S,j){if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");w instanceof Date&&(w=w.valueOf());const U=s*-j,W=s*S,P=T(w),F=q(P),H=$(P,U)-F.ra,A=g(H,W,F.dec),K=M(H,W,F.dec);return{azimuth:A,altitude:K,zenith:90*Math.PI/180-K,azimuthDegrees:u*A,altitudeDegrees:u*K,zenithDegrees:90-u*K,declination:F.dec}};const X=R.times=[{angle:6,riseName:"goldenHourDawnEnd",setName:"goldenHourDuskStart"},{angle:-.3,riseName:"sunriseEnd",setName:"sunsetStart"},{angle:-.833,riseName:"sunriseStart",setName:"sunsetEnd"},{angle:-1,riseName:"goldenHourDawnStart",setName:"goldenHourDuskEnd"},{angle:-4,riseName:"blueHourDawnEnd",setName:"blueHourDuskStart"},{angle:-6,riseName:"civilDawn",setName:"civilDusk"},{angle:-8,riseName:"blueHourDawnStart",setName:"blueHourDuskEnd"},{angle:-12,riseName:"nauticalDawn",setName:"nauticalDusk"},{angle:-15,riseName:"amateurDawn",setName:"amateurDusk"},{angle:-18,riseName:"astronomicalDawn",setName:"astronomicalDusk"}],fe=R.timesDeprecated=[["dawn","civilDawn"],["dusk","civilDusk"],["nightEnd","astronomicalDawn"],["night","astronomicalDusk"],["nightStart","astronomicalDusk"],["goldenHour","goldenHourDuskStart"],["sunrise","sunriseStart"],["sunset","sunsetEnd"],["goldenHourEnd","goldenHourDawnEnd"],["goldenHourStart","goldenHourDuskStart"]];R.addTime=function(w,S,j,U,W,P){let F=typeof S=="string"&&S.length>0&&typeof j=="string"&&j.length>0&&typeof w=="number";if(F){const H=/^(?![0-9])[a-zA-Z0-9$_]+$/;for(let A=0;A<X.length;++A){if(!H.test(S)||S===X[A].riseName||S===X[A].setName){F=!1;break}if(!H.test(j)||j===X[A].riseName||j===X[A].setName){F=!1;break}}if(F){const A=P===!1?w*(180/Math.PI):w;X.push({angle:A,riseName:S,setName:j,risePos:U,setPos:W});for(let K=fe.length-1;K>=0;K--)(fe[K][0]===S||fe[K][0]===j)&&fe.splice(K,1);return!0}}return!1},R.addDeprecatedTimeName=function(w,S){let j=typeof w=="string"&&w.length>0&&typeof S=="string"&&S.length>0;if(j){let U=!1;const W=/^(?![0-9])[a-zA-Z0-9$_]+$/;for(let P=0;P<X.length;++P){if(!W.test(w)||w===X[P].riseName||w===X[P].setName){j=!1;break}(S===X[P].riseName||S===X[P].setName)&&(U=!0)}if(j&&U)return fe.push([w,S]),!0}return!1};const Y=9e-4;function O(w,S){return Math.round(w-Y-S/(2*Math.PI))}function E(w,S,j){return Y+(w+S)/(2*Math.PI)+j}function _(w,S,j){return c+w+.0053*r(S)-.0069*r(2*j)}function I(w,S,j){return i((r(w)-r(S)*r(j))/(t(S)*t(j)))}function z(w){return-2.076*Math.sqrt(w)/60}function V(w,S,j,U,W,P,F){const H=I(w,j,U),A=E(H,S,W);return _(A,P,F)}R.getSunTimes=function(w,S,j,U,W,P){if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");const F=new Date(w);P?F.setUTCHours(12,0,0,0):F.setHours(12,0,0,0);const H=s*-j,A=s*S,K=z(U||0),te=T(F.valueOf()),oe=O(te,H),J=E(0,H,oe),ye=Q(J),me=pe(ye),le=k(me,0),de=_(J,ye,me),je=x(de),Ce=x(de+.5),ce={solarNoon:{value:new Date(je),ts:je,name:"solarNoon",julian:de,valid:!isNaN(de),pos:X.length},nadir:{value:new Date(Ce),ts:Ce,name:"nadir",julian:de+.5,valid:!isNaN(de),pos:X.length*2+1}};for(let ge=0,Me=X.length;ge<Me;ge+=1){const xe=X[ge],jt=xe.angle,fn=(jt+K)*s;let Ct=!0,tt=V(fn,H,A,le,oe,ye,me);isNaN(tt)&&(tt=de+.5,Ct=!1);const nr=de-(tt-de),ir=x(tt),sr=x(nr);ce[xe.setName]={value:new Date(ir),ts:ir,name:xe.setName,elevation:jt,julian:tt,valid:Ct,pos:Me+ge+1},ce[xe.riseName]={value:new Date(sr),ts:sr,name:xe.riseName,elevation:jt,julian:nr,valid:Ct,pos:Me-ge-1}}if(W)for(let ge=0,Me=fe.length;ge<Me;ge+=1){const xe=fe[ge];ce[xe[0]]=Object.assign({},ce[xe[1]]),ce[xe[0]].deprecated=!0,ce[xe[0]].nameOrg=ce[xe[1]].pos,ce[xe[0]].posOrg=ce[xe[0]].pos,ce[xe[0]].pos=-2}return ce},R.getSunTime=function(w,S,j,U,W,P,F){if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");if(isNaN(U))throw new Error("elevationAngle missing");P&&(U=U*s);const H=new Date(w);F?H.setUTCHours(12,0,0,0):H.setHours(12,0,0,0);const A=s*-j,K=s*S,te=z(W||0),oe=T(H.valueOf()),J=O(oe,A),ye=E(0,A,J),me=Q(ye),le=pe(me),de=k(le,0),je=_(ye,me,le),Ce=(U-.833+te)*s,ce=V(Ce,A,K,de,J,me,le),ge=je-(ce-je),Me=x(ce),xe=x(ge);return{set:{name:"set",value:new Date(Me),ts:Me,elevation:U,julian:ce,valid:!isNaN(ce),pos:0},rise:{name:"rise",value:new Date(xe),ts:xe,elevation:U,julian:ge,valid:!isNaN(ge),pos:1}}},R.getSunTimeByAzimuth=function(w,S,j,U,W){if(isNaN(U))throw new Error("azimuth missing");if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");W&&(U=U*s);const P=new Date(w),F=s*-j,H=s*S;let A=new Date(P.getFullYear(),P.getMonth(),P.getDate(),0,0,0).valueOf(),K=f;for(A+=K;K>200;){const te=T(A),oe=q(te),J=$(te,F)-oe.ra,ye=g(J,H,oe.dec);K/=2,ye<U?A+=K:A-=K}return new Date(Math.floor(A))},R.getSolarTime=function(w,S,j){const U=new Date(w),W=new Date(U.getFullYear(),0,0),P=U.getTime()-W.getTime()+(W.getTimezoneOffset()-U.getTimezoneOffset())*60*1e3,F=Math.floor(P/f),H=360/365*(F-81)*s,A=9.87*r(2*H)-7.53*t(H)-1.5*r(H),K=15*j,te=A+4*(S-K),oe=U.getHours()+te/60+U.getMinutes()/60,J=new Date(0,0);return J.setMinutes(+oe*60),J};function G(w){const S=s*(218.316+13.176396*w),j=s*(134.963+13.064993*w),U=s*(93.272+13.22935*w),W=S+s*6.289*r(j),P=s*5.128*r(U),F=385001-20905*t(j);return{ra:m(W,P),dec:k(W,P),dist:F}}R.getMoonPosition=function(w,S,j){if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");w instanceof Date&&(w=w.valueOf());const U=s*-j,W=s*S,P=T(w),F=G(P),H=$(P,U)-F.ra;let A=M(H,W,F.dec);A+=Z(A);const K=o(r(H),a(W)*t(F.dec)-r(F.dec)*t(H)),te=g(H,W,F.dec);return{azimuth:te,altitude:A,azimuthDegrees:u*te,altitudeDegrees:u*A,distance:F.dist,parallacticAngle:K,parallacticAngleDegrees:u*K}};const ae=R.moonCycles=[{from:0,to:.033863193308711,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"🌒",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"🌓",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"🌔",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"🌝",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"🌖",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"🌗",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"🌘",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}];R.getMoonIllumination=function(w){w instanceof Date&&(w=w.valueOf());const S=T(w),j=q(S),U=G(S),W=149598e3,P=i(r(j.dec)*r(U.dec)+t(j.dec)*t(U.dec)*t(j.ra-U.ra)),F=o(W*r(P),U.dist-W*t(P)),H=o(t(j.dec)*r(j.ra-U.ra),r(j.dec)*t(U.dec)-t(j.dec)*r(U.dec)*t(j.ra-U.ra)),A=.5+.5*F*(H<0?-1:1)/Math.PI;let te=(w-v)%p;te<0&&(te+=p);const oe=p-te+w;let J=p/2-te+w;J<w&&(J+=p);const ye=p/4;let me=ye-te+w;me<w&&(me+=p);let le=p-ye-te+w;le<w&&(le+=p);const de=Math.min(oe,me,J,le);let je;for(let Ce=0;Ce<ae.length;Ce++){const ce=ae[Ce];if(A>=ce.from&&A<=ce.to){je=ce;break}}return{fraction:(1+t(F))/2,phase:je,phaseValue:A,angle:H,next:{value:de,date:new Date(de).toISOString(),type:de===oe?"newMoon":de===me?"firstQuarter":de===J?"fullMoon":"thirdQuarter",newMoon:{value:oe,date:new Date(oe).toISOString()},fullMoon:{value:J,date:new Date(J).toISOString()},firstQuarter:{value:me,date:new Date(me).toISOString()},thirdQuarter:{value:le,date:new Date(le).toISOString()}}}},R.getMoonData=function(w,S,j){const U=R.getMoonPosition(w,S,j),W=R.getMoonIllumination(w);return Object.assign({illumination:W,zenithAngle:W.angle-U.parallacticAngle},U)};function se(w,S){return w+S*f/24}R.getMoonTimes=function(w,S,j,U){if(isNaN(S))throw new Error("latitude missing");if(isNaN(j))throw new Error("longitude missing");const W=new Date(w);U?W.setUTCHours(0,0,0,0):W.setHours(0,0,0,0),w=W.valueOf();const P=.133*s;let F=R.getMoonPosition(w,S,j).altitude-P,H,A,K,te,oe,J,ye,me;for(let de=1;de<=26;de+=2){const je=R.getMoonPosition(se(w,de),S,j).altitude-P,Ce=R.getMoonPosition(se(w,de+1),S,j).altitude-P,ce=(F+Ce)/2-je,ge=(Ce-F)/2,Me=-ge/(2*ce);if(K=(ce*Me+ge)*Me+je,te=ge*ge-4*ce*je,oe=0,te>=0&&(me=Math.sqrt(te)/(Math.abs(ce)*2),J=Me-me,ye=Me+me,Math.abs(J)<=1&&oe++,Math.abs(ye)<=1&&oe++,J<-1&&(J=ye)),oe===1?F<0?H=de+J:A=de+J:oe===2&&(H=de+(K<0?ye:J),A=de+(K<0?J:ye)),H&&A)break;F=Ce}const le={};return H?le.rise=new Date(se(w,H)):le.rise=NaN,A?le.set=new Date(se(w,A)):le.set=NaN,!H&&!A?K>0?(le.alwaysUp=!0,le.alwaysDown=!1):(le.alwaysUp=!1,le.alwaysDown=!0):H&&A?(le.alwaysUp=!1,le.alwaysDown=!1,le.highest=new Date(se(w,Math.min(H,A)+Math.abs(A-H)/2))):(le.alwaysUp=!1,le.alwaysDown=!1),le};function he(w,S){return w>S?new Date(S+(w-S)/2):new Date(w+(S-w)/2)}R.moonTransit=function(w,S,j,U){let W=null,P=null;const F=new Date(w),H=new Date(S),A=F.getTime(),K=H.getTime(),te=H.getDate();let oe,J;return w&&S&&(w<S?W=he(A,K):P=he(A,K)),w&&(J=he(A,R.getMoonTimes(new Date(F).setDate(te+1),j,U).set.valueOf()),J.getDate()===te&&(W?P=J:W=J)),S&&(oe=he(K,R.getMoonTimes(new Date(H).setDate(te-1),j,U).rise.valueOf()),oe.getDate()===te&&(W=oe)),{main:W,invert:P}},n.exports=R})()})(dn);var Ks=dn.exports;const Nr=Ge(Ks);function Zs(n){let e=[],r=[];if(n.rules.length===0)return[];for(let l=0;l<n.rules.length;l++){const o=n.rules[l]||{};if(Object.keys(o).length===0)continue;const[i,s]=o.mode.split("-");if(i==="date"){const u=o.dates.map(f=>({rule:o.name,date:f}));s==="add"&&(e=e.concat(u)),s==="del"&&(r=r.concat(u))}if(i==="rule"){let u=function(p){if(p==null)return;const v=String(p).trim();if(v==="")return;if(v.includes(","))return v.split(",").map(D=>D.trim()).filter(D=>D!==""||D!=="0").map(D=>Number(D)).filter(D=>Number.isInteger(D));const x=Number(v);if(x!==0&&Number.isInteger(x))return x},f={};f={...f,...o.dtstart!==void 0&&{dtstart:new Date(o.dtstart)},...o.until!==void 0&&{until:new Date(o.until)},...o.count!==void 0&&{count:o.count},...o.interval!==void 0&&{interval:parseInt(o.interval)},...o.freq!==void 0&&{freq:o.freq},...o.weekstart!==void 0&&{wkst:o.weekstart},...o.byweekday!==void 0&&{byweekday:u(o.byweekday)},...o.bymonth!==void 0&&{bymonth:u(o.bymonth)},...o.bysetpos!==void 0&&{bysetpos:u(o.bysetpos)},...o.bymonthday!==void 0&&{bymonthday:u(o.bymonthday)},...o.byyearday!==void 0&&{byyearday:u(o.byyearday)},...o.byweekno!==void 0&&{byweekno:u(o.byweekno)},...o.byhour!==void 0&&{byhour:u(o.byhour)},...o.byminute!==void 0&&{byminute:u(o.byminute)}};const h=100;let c=new N(f).all((p,v)=>v<h).map(p=>({rule:o.name,date:p.toISOString()}));if(o.freq<=N.DAILY&&o.latitude!==void 0&&o.longitude!==void 0&&o.latitude!==""&&o.longitude!==""&&!isNaN(o.latitude)&&!isNaN(o.longitude)&&o.latitude>=-90&&o.latitude<=90&&o.longitude>=-180&&o.longitude<=180&&(o.suntimes&&o.suntimes.length>0||o.moontimes&&o.moontimes.length>0)){const p=[],v=[];o.suntimes&&o.suntimes.length>0&&c.forEach(x=>{const T=Nr.getSunTimes(new Date(x.date),o.latitude,o.longitude);o.suntimes.forEach(D=>{if(T[D]===void 0)return;const m=T[D];p.push({rule:o.name,date:m.value.toISOString(),type:"sun"})})}),o.moontimes&&o.moontimes.length>0&&c.forEach(x=>{const T=Nr.getMoonTimes(new Date(x.date),o.latitude,o.longitude);o.moontimes.forEach(D=>{let m;switch(D){case"moonrise":m="rise";break;case"moonset":m="set";break;case"moonhigh":m="highest";break;default:return""}if(T[m]===void 0)return;const k=T[m];v.push({rule:o.name,date:k.toISOString(),type:"moon"})})}),c=p.concat(v),c=c.sort(t)}o.count!==void 0&&o.count>0&&(c=c.slice(0,o.count)),s==="add"&&(e=e.concat(c)),s==="del"&&(r=r.concat(c))}}function t(l,o){return ie(l.date).valueOf()-ie(o.date).valueOf()}e=[...new Set(e)],r=[...new Set(r)];let a=e.filter(l=>!r.includes(l));return a=a.sort(t),a}function Js(){const[n,e]=B.useState([]),r=B.useContext(ze),t=B.useContext(We),a=t.selectedTimeseriesID?r.find(i=>i.id===t.selectedTimeseriesID):null;B.useEffect(()=>{e(Zs(a))},[a.rules]);const l={table:{width:"inherit"},tableContainer:{maxHeight:430,width:"inherit"},padding:{padding:"0px 10px"}},o={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return d.jsxs(d.Fragment,{children:[d.jsx(ut,{size:3,text:"tsDatelist"}),d.jsxs(y.Box,{sx:{...l.padding},children:[L.I18n.t("tsActualDates"),":",d.jsx(y.TableContainer,{sx:{...l.tableContainer},children:d.jsxs(y.Table,{sx:{...l.table},size:"small",stickyHeader:!0,children:[d.jsx(y.TableHead,{children:d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{children:"#"}),d.jsx(y.TableCell,{children:L.I18n.t("tsDate")}),d.jsx(y.TableCell,{children:L.I18n.t("tsRule")})]})}),d.jsxs(y.TableBody,{children:[n.length>0&&n.map((i,s)=>d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{children:`000${s+1}`.slice(-3)}),d.jsx(y.TableCell,{children:new Date(i.date).toLocaleString(void 0,o)}),d.jsx(y.TableCell,{children:i.rule})]},s)),n.length===0&&d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{children:L.I18n.t("tsTableListEmpty")}),d.jsx(y.TableCell,{})]})]})]})})]})]})}const mt={paper:{padding:"10px",height:"100%"},textfield:{flex:"auto",padding:"0px 10px 0px 0px"},padding:{padding:"0px 10px"}};function yt(n,e,r){var a;const t=(a=n.errors)==null?void 0:a[e];return t&&Object.prototype.hasOwnProperty.call(t,r)?L.I18n.t(t[r].join("")):null}function Qs(){const n=B.useContext(ze),e=lt(),r=B.useContext(We),t=Xe(),a=r.selectedTimeseriesID?n.find(o=>o.id===r.selectedTimeseriesID):null,l=rr();return B.useEffect(()=>{r.origTimeserie||t({type:"origTimeserie",value:a})},[r.origTimeserie,a]),B.useEffect(()=>{l()},[n]),B.useEffect(()=>{var o,i,s;t({type:"isBack",value:Object.values(((o=r.errors)==null?void 0:o.timeseries)||{}).some(u=>u!==null)||Object.values(((i=r.errors)==null?void 0:i.rule)||{}).some(u=>u!==null)||Object.values(((s=r.errors)==null?void 0:s.date)||{}).some(u=>u!==null)})},[r.errors]),d.jsx(y.Dialog,{fullScreen:!0,open:r.isTimeserieEditing,onClose:()=>t({type:"isTimeserieEditing",value:!1}),children:d.jsx(y.Paper,{sx:{...mt.paper},children:d.jsxs(y.Grid,{container:!0,children:[d.jsxs(y.Grid,{item:!0,xs:12,sm:6,children:[d.jsx(ut,{size:3,text:r.isTimeserieNew?"tsTimeserieAdd":"tsTimeserieEdit"}),d.jsxs(y.Box,{sx:{...mt.padding},children:[d.jsxs(y.Grid,{container:!0,children:[d.jsx(y.Grid,{item:!0,xs:6,sm:6,children:d.jsx(ke,{title:L.I18n.t("tsTimeseriesNameTooltip"),children:d.jsx(y.TextField,{sx:{...mt.textfield},fullWidth:!0,label:L.I18n.t("tsTimeseriesName"),name:"tsname",variant:"standard",autoFocus:!0,onChange:o=>{const i={type:"timeseries-field-change",id:a.id,field:o.target.name,value:o.target.value};e(i)},size:"small",margin:"dense",value:a.tsname,error:yt(r,"timeseries","tsname")!==null,helperText:yt(r,"timeseries","tsname")})})}),d.jsx(y.Grid,{item:!0,xs:6,sm:6,children:d.jsx(ke,{title:L.I18n.t("tsTimeseriesDurationTooltip"),children:d.jsx(y.TextField,{sx:{...mt.textField},fullWidth:!0,label:L.I18n.t("tsTimeseriesDuration"),name:"tsduration",variant:"standard",value:a.tsduration,onChange:o=>{const i={type:"timeseries-field-change",id:a.id,field:o.target.name,value:o.target.value};e(i)},size:"small",margin:"dense",error:yt(r,"timeseries","tsduration")!==null,helperText:yt(r,"timeseries","tsduration")})})})]}),d.jsx(y.Grid,{item:!0,xs:12,children:d.jsx(qs,{})}),d.jsxs(y.Grid,{item:!0,xs:12,children:[d.jsxs(y.Grid,{container:!0,spacing:1,children:[d.jsx(y.Grid,{item:!0,children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(Ie.ArrowBack,{}),disabled:r.isBack,onClick:()=>{r.isDateEditing?(t({type:"origRule",value:null}),t({type:"isDateEditing",value:!1}),t({type:"isRuleEditing",value:!1})):r.isRuleEditing?(t({type:"origRule",value:null}),t({type:"isDateEditing",value:!1}),t({type:"isRuleEditing",value:!1})):(t({type:"origTimeserie",value:null}),t({type:"isTimeserieEditing",value:!1}))},variant:"contained",children:L.I18n.t("tsBack")})}),d.jsx(y.Grid,{item:!0,children:d.jsx(y.Button,{color:"primary",startIcon:d.jsx(Ie.Cancel,{}),onClick:()=>{let o;r.isRuleEditing||r.isDateEditing?(r.isRuleNew?o={type:"rule-delete",tsid:r.selectedTimeseriesID,rid:r.selectedRuleID}:o={type:"rule-change",tsid:r.selectedTimeseriesID,rid:r.selectedRuleID,item:r.origRule},e(o),t({type:"isRuleNew",value:!1}),t({type:"selectedRuleID",value:null}),t({type:"origRule",value:null}),t({type:"isRuleEditing",value:!1}),t({type:"isDateEditing",value:!1})):(r.isTimeserieNew?o={type:"timeseries-delete",id:a.id}:o={type:"timeseries-change",id:a.id,item:r.origTimeserie},e(o),t({type:"isTimeserieNew",value:!1}),t({type:"selectedTimeseriesID",value:null}),t({type:"isTimeserieEditing",value:!1}))},variant:"contained",children:L.I18n.t("tsCancel")})})," "]}),d.jsx(y.Grid,{item:!0})]})]})]}),d.jsx(y.Grid,{item:!0,xs:12,sm:6,children:d.jsx(Js,{})})]})})})}function Xs({sx:n}){const e=B.useContext(ze),r=lt(),t=B.useContext(We),a=Xe(),l={styleTableCellWide:{padding:"4px",width:"90%",...n},styleTableCellSmall:{padding:"4px",width:"10%",...n}};function o(){return d.jsx(Qs,{})}function i(){return d.jsxs(y.Grid,{container:!0,children:[d.jsx(y.Grid,{item:!0,xs:12,children:d.jsx(y.Grid,{item:!0,xs:12,sm:10,md:8,lg:6,children:d.jsx(y.Button,{variant:"contained",startIcon:d.jsx(Ie.Add,{}),onClick:()=>{const u=zi(e);r({type:"timeseries-add",item:u}),a({type:"isTimeserieNew",value:!0}),a({type:"selectedTimeseriesID",value:u.id}),a({type:"isTimeserieEditing",value:!0})},children:L.I18n.t("tsTimeserieAdd")})})}),d.jsx(y.Grid,{item:!0,xs:12,sm:10,md:8,lg:6,children:d.jsxs(y.Table,{children:[d.jsx(y.TableHead,{children:d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:l.styleTableCellWide,children:L.I18n.t("tsTSName")}),d.jsx(y.TableCell,{sx:l.styleTableCellSmall,children:L.I18n.t("tsTSActions")})]})}),d.jsxs(y.TableBody,{children:[e.length>0&&e.map(u=>d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:l.styleTableCellWide,children:u.tsname}),d.jsx(y.TableCell,{sx:l.styleTableCellSmall,children:d.jsxs(y.Stack,{direction:"row",children:[d.jsx(y.IconButton,{onClick:()=>{a({type:"isTimeserieNew",value:!1}),a({type:"selectedTimeseriesID",value:u.id}),a({type:"isTimeserieEditing",value:!0})},children:d.jsx(Ie.Edit,{})}),d.jsx(y.IconButton,{onClick:()=>{r({type:"timeseries-delete",id:u.id})},children:d.jsx(Ie.Delete,{})})]})})]},u.id)),e.length===0&&d.jsxs(y.TableRow,{children:[d.jsx(y.TableCell,{sx:l.styleTableCellWide,children:L.I18n.t("tsTableListEmpty")}),d.jsx(y.TableCell,{sx:l.styleTableCellSmall})]})]})]})})]})}let s;return t.isTimeserieEditing?s=o():s=i(),s}function ea(n,e){let r;switch(e.type){case"timeseries-field-change":{r=n.map(t=>t.id===e.id?{...t,[e.field]:e.value}:t);break}case"rule-field-change":{r=n.map(t=>t.id===e.tsid?{...t,rules:t.rules.map(a=>a.id===e.rid?{...a,[e.field]:e.value}:a)}:t);break}case"rule-field-change-array":{e.checked?r=n.map(t=>t.id===e.tsid?{...t,rules:t.rules.map(a=>a.id===e.rid?{...a,[e.field]:[...a[e.field]||[],e.value]}:a)}:t):r=n.map(t=>t.id===e.tsid?{...t,rules:t.rules.map(a=>a.id===e.rid?{...a,[e.field]:[...a[e.field].filter(l=>JSON.stringify(l)!==JSON.stringify(e.value))]}:a)}:t);break}case"timeseries-add":{r=[...n,{...e.item}];break}case"rule-add":{r=n.map(t=>t.id===e.tsid?{...t,rules:[...t.rules,e.item]}:t);break}case"timeseries-change":{r=n.map(t=>t.id===e.id?e.item:t);break}case"rule-change":{r=n.map(t=>t.id===e.tsid?{...t,rules:t.rules.map(a=>a.id===e.rid?e.item:a)}:t);break}case"rule-delete":{r=n.map(t=>t.id===e.tsid?{...t,rules:t.rules.filter(a=>a.id!==e.rid)}:t);break}case"timeseries-delete":{r=n.filter(t=>t.id!==e.id);break}default:throw Error(`Unknown action: ${e.type}`)}return r}function ta({initialTimeseries:n,onChange:e,children:r}){const[t]=B.useState(n.countdowns),[a,l]=B.useReducer(ea,n.timeseries);return B.useEffect(()=>{e&&e({countdowns:t,timeseries:a})},[e,t,a]),d.jsx(ze.Provider,{value:a,children:d.jsx(Gr.Provider,{value:l,children:r})})}function ra(n,e){switch(e.type){case"isTimeserieNew":case"isTimeserieEditing":case"isRuleEditing":case"isDateEditing":case"isRuleNew":case"selectedTimeseriesID":case"selectedRuleID":case"origTimeserie":case"origRule":case"errors":case"isBack":return{...n,[e.type]:e.value};default:throw Error(`Unknown action: ${e.type}`)}}function na({initialNavState:n,children:e}){const[r,t]=B.useReducer(ra,n);return d.jsx(We.Provider,{value:r,children:d.jsx(qr.Provider,{value:t,children:e})})}class cn extends Hi.ConfigGeneric{constructor(e){super(e),this.state.theme=L.Theme(e.themeName)}async componentDidMount(){super.componentDidMount()}onChange(){}renderItem(){return d.jsx(zn,{dateAdapter:Ai,children:d.jsx(ta,{initialTimeseries:this.props.data,onChange:this.props.onChange,children:d.jsx(na,{initialNavState:{isTimeserieSelected:null,isRuleEditing:null,isDateEditing:null,isTimeserieNew:null,isRuleNew:null,selectedTimeseriesID:null,selectedRuleID:null,origTimeserie:null,origRule:null,errors:null,isBack:null},children:d.jsx("div",{style:{margin:"10px 10px",width:"100%"},children:d.jsx(Xs,{})})})})})}}cn.propTypes={socket:b.object.isRequired,themeType:b.string,themeName:b.string,style:b.object,className:b.string,data:b.object.isRequired,attr:b.string,schema:b.object,onError:b.func,onChange:b.func};const ba={TimeseriesConfig:cn};export{ba as default};
//# sourceMappingURL=Components-BwmMNvo6.js.map
